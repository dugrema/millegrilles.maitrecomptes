{"version":3,"file":"static/js/585.61401b5e.chunk.js","mappings":"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","sources":["Menu.js","comptesUtil.js","manifest.build.js","../node_modules/react-i18next/dist/es/Trans.js"],"sourcesContent":["import { useState, useCallback, useMemo } from 'react'\nimport Nav from 'react-bootstrap/Nav'\nimport Navbar from 'react-bootstrap/Navbar'\nimport NavDropdown from 'react-bootstrap/NavDropdown'\n\nimport { useTranslation, Trans } from 'react-i18next'\n\nimport { Menu as MenuMillegrilles, DropDownLanguage, ModalInfo } from '@dugrema/millegrilles.reactjs'\nimport useWorkers, { useEtatConnexion } from './WorkerContext'\n\nimport { cleanupNavigateur } from './comptesUtil'\n\nimport manifest from './manifest.build'\n\nfunction Menu(props) {\n\n    const { i18n, setSectionAfficher } = props\n\n    const workers = useWorkers()\n    const { t } = useTranslation()\n    const etatConnexion = useEtatConnexion()\n    // const infoConnexion = useInfoConnexion()\n\n    // const idmg = infoConnexion.idmg\n\n    const [showModalInfo, setShowModalInfo] = useState(false)\n    const handlerCloseModalInfo = useCallback(()=>setShowModalInfo(false), [setShowModalInfo])\n\n    // const usagerProprietaire = useMemo(()=>usagerExtensions.delegationGlobale === 'proprietaire', [usagerExtensions])\n\n    const handlerSelect = eventKey => {\n        switch(eventKey) {\n            case 'applications': break\n\n            // Menu default\n            case 'information': setShowModalInfo(true); break\n            case 'deconnecter': deconnecter(workers); break\n\n            // Sections\n            case 'SectionAjouterMethode': \n            case 'SectionActiverCompte': \n            case 'SectionActiverDelegation': \n                setSectionAfficher(eventKey)\n                break\n            \n            default:\n        }\n    }\n\n    const handlerChangerLangue = eventKey => {i18n.changeLanguage(eventKey)}\n    const brand = useMemo(()=>(\n        <Navbar.Brand>\n            <Nav.Link title={t('titre')}>\n                <Trans>titre</Trans>\n            </Nav.Link>\n        </Navbar.Brand>\n    ), [t])\n\n    return (\n        <>\n            <MenuMillegrilles brand={brand} labelMenu=\"Menu\" etatConnexion={etatConnexion} onSelect={handlerSelect} workers={workers}>\n            \n                <Nav.Link eventKey=\"information\" title=\"Afficher l'information systeme\">\n                    <Trans>menu.information</Trans>\n                </Nav.Link>\n            \n                <NavDropdown title=\"Compte\" id=\"compte-nav-dropdown\">\n                    <NavDropdown.Item eventKey='SectionAjouterMethode'>Ajouter cle</NavDropdown.Item>\n                    <NavDropdown.Item eventKey='SectionActiverCompte'>Activer code</NavDropdown.Item>\n                    <NavDropdown.Item eventKey='SectionActiverDelegation'>Administrer</NavDropdown.Item>\n                </NavDropdown>\n\n                <DropDownLanguage title={t('menu.language')} onSelect={handlerChangerLangue}>\n                    <NavDropdown.Item eventKey=\"en-US\">English</NavDropdown.Item>\n                    <NavDropdown.Item eventKey=\"fr-CA\">Francais</NavDropdown.Item>\n                </DropDownLanguage>\n            \n                <Nav.Link eventKey=\"deconnecter\" title={t('deconnecter')}>\n                    <Trans>menu.deconnecter</Trans>\n                </Nav.Link>\n            \n            </MenuMillegrilles>\n            \n            <ModalInfo \n                show={showModalInfo} \n                fermer={handlerCloseModalInfo} \n                manifest={manifest} \n                // idmg={idmg} \n                />\n        </>\n    )\n}\n\nexport default Menu\n\nasync function deconnecter(workers) {\n    console.debug(\"Deconnecter\")\n    await cleanupNavigateur()\n    await workers.connexion.deconnecter()\n    window.location = '/auth/deconnecter_usager'\n}\n","import axios from 'axios'\n\nimport { usagerDao } from '@dugrema/millegrilles.reactjs'\n\nimport { extraireExtensionsMillegrille } from '@dugrema/millegrilles.utiljs/src/forgecommon'\nimport { genererClePrivee, genererCsrNavigateur } from '@dugrema/millegrilles.utiljs/src/certificats'\n\nimport { pki as forgePki } from '@dugrema/node-forge'\n\nexport async function sauvegarderCertificatPem(usager, chainePem, dataAdditionnel) {\n    dataAdditionnel = dataAdditionnel || {}\n\n    const certForge = forgePki.certificateFromPem(chainePem[0])  // Validation simple, format correct\n    const nomUsager = certForge.subject.getField('CN').value\n    // const validityNotAfter = certForge.validity.notAfter.getTime()\n    // console.debug(\"Sauvegarde du nouveau cerfificat de navigateur usager %s, expiration %O\", nomUsager, validityNotAfter)\n  \n    if(nomUsager !== usager) throw new Error(`Certificat pour le mauvais usager : ${nomUsager} !== ${usager}`)\n  \n    const copieChainePem = [...chainePem]\n    if(copieChainePem.length < 2) throw new Error(`Certificat recu n'a pas intermediaire/CA (len=${chainePem.length}): ${chainePem.join('')}`)\n\n    const params = {...dataAdditionnel, requete: null}\n\n    if(copieChainePem.length === 3) {\n        params.ca = copieChainePem.pop()\n    }\n    params.certificat = copieChainePem\n\n    await usagerDao.updateUsager(usager, params)\n}\n\nexport function getUserIdFromCertificat(certificat) {\n    let certForge = certificat\n    if(typeof(certificat) === 'string') {\n        certForge = forgePki.certificateFromPem(certificat)\n    }\n    const extensions = extraireExtensionsMillegrille(certForge)\n    const userId = extensions.userId\n    return userId\n}\n\nexport async function genererCle(nomUsager) {\n    // Generer nouveau keypair et stocker\n    const cles = await genererClePrivee()\n\n    // Extraire cles, generer CSR du navigateur\n    // const clePubliqueBytes = String.fromCharCode.apply(null, multibase.encode('base64', cles.publicKey.publicKeyBytes))\n    const fingerprintPublicKey = Buffer.from(cles.publicKey.publicKeyBytes).toString('hex')\n    // const fingerprintPublicKey = await hachage.hacher(publicKeyBytes, {hashingCode: 'blake2s-256', encoding: 'base58btc'})\n    console.debug(\"Fingerprint publickey : %O \\n(bytes : %O)\", fingerprintPublicKey, cles.publicKey.publicKeyBytes)\n\n    // const clePubliqueBytes = base58btc.encode(cles.publicKey.publicKeyBytes)\n    const csrNavigateur = await genererCsrNavigateur(nomUsager, cles.pem)\n\n    return {\n        fingerprint_pk: fingerprintPublicKey, \n        csr: csrNavigateur,\n        clePriveePem: cles.pem,\n    }\n}\n\n// Initialiser le compte de l'usager\nexport async function initialiserCompteUsager(nomUsager, opts) {\n    if(!opts) opts = {}\n  \n    if( ! nomUsager ) throw new Error(\"Usager null\")\n  \n    let usager = await usagerDao.getUsager(nomUsager)\n    const certificat = usager?usager.certificat:null\n    let genererCsr = false\n  \n    // console.debug(\"initialiserNavigateur Information usager initiale : %O\", usager)\n  \n    if( !usager ) {\n        // console.debug(\"Nouvel usager, initialiser compte et creer CSR %s\", nomUsager)\n        genererCsr = true\n    } else if( opts.regenerer === true ) {\n        // console.debug(\"Force generer un nouveau certificat\")\n        genererCsr = true\n    } else if(!certificat && !usager.requete) {\n        // console.debug(\"Certificat/CSR absent, generer nouveau certificat\")\n        genererCsr = true\n    } else if(certificat) {\n        // Verifier la validite du certificat\n        const {certificatValide, canRenew} = verifierDateRenouvellementCertificat(certificat) \n        if(!certificatValide) {\n            // Certificat expire. Retirer certificat/cle du compte\n            await usagerDao.updateUsager(nomUsager, {nomUsager, certificat: null, clePriveePem: null, fingerprintPk: null})\n            usager.certificat = null\n            usager.clePriveePem = null\n        }\n        if( canRenew || !certificatValide ) {\n            // Generer nouveau certificat\n            console.warn(\"Certificat invalide ou date de renouvellement atteinte\")\n            genererCsr = true\n        }\n    }\n  \n    if(genererCsr) {\n        const nouvellesCles = await genererCle(nomUsager)\n        const {csr, clePriveePem, fingerprint_pk} = nouvellesCles\n        const requete = {csr, clePriveePem, fingerprintPk: fingerprint_pk}\n        await usagerDao.updateUsager(nomUsager, {nomUsager, requete})\n        usager = {...usager, nomUsager, requete}\n    }\n  \n    // console.debug(\"Compte usager : %O\", usager)\n    return usager\n}\n\nfunction verifierDateRenouvellementCertificat(certificat) {\n    // Verifier la validite du certificat\n    const certForge = forgePki.certificateFromPem(certificat.join(''))\n    \n    const validityNotAfter = certForge.validity.notAfter.getTime(),\n            validityNotBefore = certForge.validity.notBefore.getTime()\n    const certificatValide = new Date().getTime() < validityNotAfter\n\n    // Calculer 2/3 de la duree pour trigger de renouvellement\n    const validityRenew = (validityNotAfter - validityNotBefore) / 3.0 * 2.0 + validityNotBefore\n    const canRenew = new Date().getTime() > validityRenew\n\n    // console.debug(\n    //     \"Certificat valide presentement : %s, epoch can renew? (%s) : %s (%s)\",\n    //     certificatValide, canRenew, validityRenew, new Date(validityRenew)\n    // )\n\n    return {certificatValide, canRenew}\n}\n\nexport function getNomUsagerCsr(csrPem) {\n    try {\n        // console.debug(\"Charger pem csr : %O\", csrPem)\n        const csrForge = forgePki.certificationRequestFromPem(csrPem)\n        // console.debug(\"CSR Forge : %O\", csrForge)\n\n        const cn = csrForge.subject.getField('CN').value\n        // console.debug(\"Common name : %O\", cn)\n\n        return cn\n    } catch(err) {\n        console.warn(\"Erreur chargement CSR : %O\", err)\n        return null\n    }\n}\n\nexport async function preparerUsager(workers, nomUsager, erreurCb, opts) {\n    opts = opts || {}\n    const genererChallenge = opts.genererChallenge\n    const connexion = null  // workers.connexion\n    console.debug(\"comptesUtil.preparerUsager Suivant avec usager %s\", nomUsager)\n    \n    // Verifier etat du compte local. Creer ou regenerer certificat (si absent ou expire).\n    let usagerLocal = await initialiserCompteUsager(nomUsager) \n\n    let fingerprintNouveau = null,\n        fingerprintCourant = null\n    if(usagerLocal) {\n        fingerprintCourant = usagerLocal.fingerprintPk\n        if(usagerLocal.requete) {\n            fingerprintNouveau = usagerLocal.requete.fingerprintPk\n        }\n    }\n\n    const etatUsagerWebAuth = await chargerUsager(\n        nomUsager, fingerprintNouveau, fingerprintCourant, \n        {genererChallenge}\n    )\n    // console.debug(\"Etat usager backend : %O\", etatUsagerBackend)\n\n    const infoUsager = etatUsagerWebAuth.infoUsager || {}\n    const certificat = infoUsager.certificat\n    if(certificat) {\n        // Mettre a jour le certificat\n        const usager = await usagerDao.getUsager(nomUsager)\n        const requete = usager.requete\n        if(requete) {\n            const { clePriveePem, fingerprintPk } = requete\n            // Extraire le certificat\n            const dataAdditionnel = {clePriveePem, fingerprintPk}\n            await sauvegarderCertificatPem(nomUsager, certificat, dataAdditionnel)\n        }\n    }\n\n    return etatUsagerWebAuth\n    // await setEtatUsagerBackend(etatUsagerBackend)\n    // await setUsagerDbLocal(await usagerDao.getUsager(nomUsager))\n}\n\n// export async function chargerUsager(connexion, nomUsager, fingerprintPk, fingerprintCourant, opts) {\n//     opts = opts || {}\n//     const hostname = window.location.hostname\n//     opts = {hostname, ...opts, fingerprintPk, fingerprintCourant}\n//     const infoUsager = await connexion.getInfoUsager(nomUsager, opts)\n//     return {nomUsager, infoUsager, authentifie: false}\n// }\n\nexport async function chargerUsager(nomUsager, fingerprintPk, fingerprintCourant, opts) {\n    opts = opts || {}\n    const hostname = window.location.hostname\n    const data = {\n        nomUsager, hostname, \n        ...opts, \n        fingerprintPkNouveau: fingerprintPk, fingerprintPkCourant: fingerprintCourant\n    }\n    const reponse = await axios({method: 'POST', url: '/auth/get_usager', data, timeout: 20_000})\n    const reponseEnveloppe = reponse.data\n    const infoUsager = JSON.parse(reponseEnveloppe.contenu)\n    console.debug(\"chargerUsager Reponse \", infoUsager)\n    const authentifie = infoUsager?infoUsager.auth:false\n    return {nomUsager, infoUsager, authentifie}\n}\n\n/** \n * Supprime toutes les idb databases autre que celles de maitre des comptes, vide les cles, et autre storage.\n */\nconst DATABASES = ['collections', 'documents', 'messagerie']\nconst CACHE_STORAGE_NAMES = ['fichiersDechiffresTmp']\nexport async function cleanupNavigateur() {\n    if('indexedDB' in window) {\n        let databases = DATABASES\n        if('databases' in window.indexedDB) {\n            console.debug(\"Supporte indexedDB.databases()\")\n            databases = await window.indexedDB.databases()\n            console.log(databases)\n        }\n\n        // Supprimer databases\n        const promisesDelete = []\n        for (const databaseName of databases) {\n            if(databaseName === 'millegrilles') continue  // Skip DB millegrilles\n            console.debug(\"Supprimer database %s\", databaseName)\n            const promise = new Promise((resolve, reject)=>{\n                const request = window.indexedDB.deleteDatabase(databaseName)\n                request.onblocked = e=>{\n                    console.warn(\"delete blocked sur database %s : %O\", databaseName, e)\n                }\n                request.onerror = err => {\n                    console.warn(\"Erreur suppression database %s : %O\", databaseName, err)\n                    resolve()\n                }\n                request.onsuccess = () => {\n                    console.debug(\"Database %s supprimee\", databaseName)\n                    resolve()\n                }\n            })\n            promisesDelete.push(promise)\n        }\n\n        // Clear les cles dechiffrees\n        promisesDelete.push(usagerDao.clearClesDechiffrees())\n\n        // Supprimer cache storage\n        if(caches) {\n            const cacheStorage = caches\n            for (const cacheName of CACHE_STORAGE_NAMES) {\n                promisesDelete.push( cacheStorage.delete(cacheName) )\n            }\n        }\n\n        await Promise.all(promisesDelete)\n\n    } else {\n        console.debug(\"IDB non supporte\")\n    }\n}\n","const build = {\n  date: '2023-09-30 15:59',\n  version: '2023.9.0'\n}\nmodule.exports = build;\n","import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _excluded = [\"format\"],\n    _excluded2 = [\"children\", \"count\", \"parent\", \"i18nKey\", \"context\", \"tOptions\", \"values\", \"defaults\", \"components\", \"ns\", \"i18n\", \"t\", \"shouldUnescape\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useContext, isValidElement, cloneElement, createElement } from 'react';\nimport HTML from 'html-parse-stringify';\nimport { getI18n, I18nContext, getDefaults } from './context';\nimport { warn, warnOnce } from './utils';\n\nfunction hasChildren(node, checkLength) {\n  if (!node) return false;\n  var base = node.props ? node.props.children : node.children;\n  if (checkLength) return base.length > 0;\n  return !!base;\n}\n\nfunction getChildren(node) {\n  if (!node) return [];\n  return node.props ? node.props.children : node.children;\n}\n\nfunction hasValidReactChildren(children) {\n  if (Object.prototype.toString.call(children) !== '[object Array]') return false;\n  return children.every(function (child) {\n    return isValidElement(child);\n  });\n}\n\nfunction getAsArray(data) {\n  return Array.isArray(data) ? data : [data];\n}\n\nfunction mergeProps(source, target) {\n  var newTarget = _objectSpread({}, target);\n\n  newTarget.props = Object.assign(source.props, target.props);\n  return newTarget;\n}\n\nexport function nodesToString(children, i18nOptions) {\n  if (!children) return '';\n  var stringNode = '';\n  var childrenArray = getAsArray(children);\n  var keepArray = i18nOptions.transSupportBasicHtmlNodes && i18nOptions.transKeepBasicHtmlNodesFor ? i18nOptions.transKeepBasicHtmlNodesFor : [];\n  childrenArray.forEach(function (child, childIndex) {\n    if (typeof child === 'string') {\n      stringNode += \"\".concat(child);\n    } else if (isValidElement(child)) {\n      var childPropsCount = Object.keys(child.props).length;\n      var shouldKeepChild = keepArray.indexOf(child.type) > -1;\n      var childChildren = child.props.children;\n\n      if (!childChildren && shouldKeepChild && childPropsCount === 0) {\n        stringNode += \"<\".concat(child.type, \"/>\");\n      } else if (!childChildren && (!shouldKeepChild || childPropsCount !== 0)) {\n        stringNode += \"<\".concat(childIndex, \"></\").concat(childIndex, \">\");\n      } else if (child.props.i18nIsDynamicList) {\n        stringNode += \"<\".concat(childIndex, \"></\").concat(childIndex, \">\");\n      } else if (shouldKeepChild && childPropsCount === 1 && typeof childChildren === 'string') {\n        stringNode += \"<\".concat(child.type, \">\").concat(childChildren, \"</\").concat(child.type, \">\");\n      } else {\n        var content = nodesToString(childChildren, i18nOptions);\n        stringNode += \"<\".concat(childIndex, \">\").concat(content, \"</\").concat(childIndex, \">\");\n      }\n    } else if (child === null) {\n      warn(\"Trans: the passed in value is invalid - seems you passed in a null child.\");\n    } else if (_typeof(child) === 'object') {\n      var format = child.format,\n          clone = _objectWithoutProperties(child, _excluded);\n\n      var keys = Object.keys(clone);\n\n      if (keys.length === 1) {\n        var value = format ? \"\".concat(keys[0], \", \").concat(format) : keys[0];\n        stringNode += \"{{\".concat(value, \"}}\");\n      } else {\n        warn(\"react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.\", child);\n      }\n    } else {\n      warn(\"Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.\", child);\n    }\n  });\n  return stringNode;\n}\n\nfunction renderNodes(children, targetString, i18n, i18nOptions, combinedTOpts, shouldUnescape) {\n  if (targetString === '') return [];\n  var keepArray = i18nOptions.transKeepBasicHtmlNodesFor || [];\n  var emptyChildrenButNeedsHandling = targetString && new RegExp(keepArray.join('|')).test(targetString);\n  if (!children && !emptyChildrenButNeedsHandling) return [targetString];\n  var data = {};\n\n  function getData(childs) {\n    var childrenArray = getAsArray(childs);\n    childrenArray.forEach(function (child) {\n      if (typeof child === 'string') return;\n      if (hasChildren(child)) getData(getChildren(child));else if (_typeof(child) === 'object' && !isValidElement(child)) Object.assign(data, child);\n    });\n  }\n\n  getData(children);\n  var ast = HTML.parse(\"<0>\".concat(targetString, \"</0>\"));\n\n  var opts = _objectSpread(_objectSpread({}, data), combinedTOpts);\n\n  function renderInner(child, node, rootReactNode) {\n    var childs = getChildren(child);\n    var mappedChildren = mapAST(childs, node.children, rootReactNode);\n    return hasValidReactChildren(childs) && mappedChildren.length === 0 ? childs : mappedChildren;\n  }\n\n  function pushTranslatedJSX(child, inner, mem, i, isVoid) {\n    if (child.dummy) child.children = inner;\n    mem.push(cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n      key: i\n    }), isVoid ? undefined : inner));\n  }\n\n  function mapAST(reactNode, astNode, rootReactNode) {\n    var reactNodes = getAsArray(reactNode);\n    var astNodes = getAsArray(astNode);\n    return astNodes.reduce(function (mem, node, i) {\n      var translationContent = node.children && node.children[0] && node.children[0].content && i18n.services.interpolator.interpolate(node.children[0].content, opts, i18n.language);\n\n      if (node.type === 'tag') {\n        var tmp = reactNodes[parseInt(node.name, 10)];\n        if (!tmp && rootReactNode.length === 1 && rootReactNode[0][node.name]) tmp = rootReactNode[0][node.name];\n        if (!tmp) tmp = {};\n        var child = Object.keys(node.attrs).length !== 0 ? mergeProps({\n          props: node.attrs\n        }, tmp) : tmp;\n        var isElement = isValidElement(child);\n        var isValidTranslationWithChildren = isElement && hasChildren(node, true) && !node.voidElement;\n        var isEmptyTransWithHTML = emptyChildrenButNeedsHandling && _typeof(child) === 'object' && child.dummy && !isElement;\n        var isKnownComponent = _typeof(children) === 'object' && children !== null && Object.hasOwnProperty.call(children, node.name);\n\n        if (typeof child === 'string') {\n          var value = i18n.services.interpolator.interpolate(child, opts, i18n.language);\n          mem.push(value);\n        } else if (hasChildren(child) || isValidTranslationWithChildren) {\n            var inner = renderInner(child, node, rootReactNode);\n            pushTranslatedJSX(child, inner, mem, i);\n          } else if (isEmptyTransWithHTML) {\n          var _inner = mapAST(reactNodes, node.children, rootReactNode);\n\n          mem.push(cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n            key: i\n          }), _inner));\n        } else if (Number.isNaN(parseFloat(node.name))) {\n          if (isKnownComponent) {\n            var _inner2 = renderInner(child, node, rootReactNode);\n\n            pushTranslatedJSX(child, _inner2, mem, i, node.voidElement);\n          } else if (i18nOptions.transSupportBasicHtmlNodes && keepArray.indexOf(node.name) > -1) {\n            if (node.voidElement) {\n              mem.push(createElement(node.name, {\n                key: \"\".concat(node.name, \"-\").concat(i)\n              }));\n            } else {\n              var _inner3 = mapAST(reactNodes, node.children, rootReactNode);\n\n              mem.push(createElement(node.name, {\n                key: \"\".concat(node.name, \"-\").concat(i)\n              }, _inner3));\n            }\n          } else if (node.voidElement) {\n            mem.push(\"<\".concat(node.name, \" />\"));\n          } else {\n            var _inner4 = mapAST(reactNodes, node.children, rootReactNode);\n\n            mem.push(\"<\".concat(node.name, \">\").concat(_inner4, \"</\").concat(node.name, \">\"));\n          }\n        } else if (_typeof(child) === 'object' && !isElement) {\n          var content = node.children[0] ? translationContent : null;\n          if (content) mem.push(content);\n        } else if (node.children.length === 1 && translationContent) {\n          mem.push(cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n            key: i\n          }), translationContent));\n        } else {\n          mem.push(cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n            key: i\n          })));\n        }\n      } else if (node.type === 'text') {\n        var wrapTextNodes = i18nOptions.transWrapTextNodes;\n\n        var _content = shouldUnescape ? i18nOptions.unescape(i18n.services.interpolator.interpolate(node.content, opts, i18n.language)) : i18n.services.interpolator.interpolate(node.content, opts, i18n.language);\n\n        if (wrapTextNodes) {\n          mem.push(createElement(wrapTextNodes, {\n            key: \"\".concat(node.name, \"-\").concat(i)\n          }, _content));\n        } else {\n          mem.push(_content);\n        }\n      }\n\n      return mem;\n    }, []);\n  }\n\n  var result = mapAST([{\n    dummy: true,\n    children: children || []\n  }], ast, getAsArray(children || []));\n  return getChildren(result[0]);\n}\n\nexport function Trans(_ref) {\n  var children = _ref.children,\n      count = _ref.count,\n      parent = _ref.parent,\n      i18nKey = _ref.i18nKey,\n      context = _ref.context,\n      _ref$tOptions = _ref.tOptions,\n      tOptions = _ref$tOptions === void 0 ? {} : _ref$tOptions,\n      values = _ref.values,\n      defaults = _ref.defaults,\n      components = _ref.components,\n      ns = _ref.ns,\n      i18nFromProps = _ref.i18n,\n      tFromProps = _ref.t,\n      shouldUnescape = _ref.shouldUnescape,\n      additionalProps = _objectWithoutProperties(_ref, _excluded2);\n\n  var _ref2 = useContext(I18nContext) || {},\n      i18nFromContext = _ref2.i18n,\n      defaultNSFromContext = _ref2.defaultNS;\n\n  var i18n = i18nFromProps || i18nFromContext || getI18n();\n\n  if (!i18n) {\n    warnOnce('You will need to pass in an i18next instance by using i18nextReactModule');\n    return children;\n  }\n\n  var t = tFromProps || i18n.t.bind(i18n) || function (k) {\n    return k;\n  };\n\n  if (context) tOptions.context = context;\n\n  var reactI18nextOptions = _objectSpread(_objectSpread({}, getDefaults()), i18n.options && i18n.options.react);\n\n  var namespaces = ns || t.ns || defaultNSFromContext || i18n.options && i18n.options.defaultNS;\n  namespaces = typeof namespaces === 'string' ? [namespaces] : namespaces || ['translation'];\n  var defaultValue = defaults || nodesToString(children, reactI18nextOptions) || reactI18nextOptions.transEmptyNodeValue || i18nKey;\n  var hashTransKey = reactI18nextOptions.hashTransKey;\n  var key = i18nKey || (hashTransKey ? hashTransKey(defaultValue) : defaultValue);\n  var interpolationOverride = values ? tOptions.interpolation : {\n    interpolation: _objectSpread(_objectSpread({}, tOptions.interpolation), {}, {\n      prefix: '#$?',\n      suffix: '?$#'\n    })\n  };\n\n  var combinedTOpts = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, tOptions), {}, {\n    count: count\n  }, values), interpolationOverride), {}, {\n    defaultValue: defaultValue,\n    ns: namespaces\n  });\n\n  var translation = key ? t(key, combinedTOpts) : defaultValue;\n  var content = renderNodes(components || children, translation, i18n, reactI18nextOptions, combinedTOpts, shouldUnescape);\n  var useAsParent = parent !== undefined ? parent : reactI18nextOptions.defaultTransParent;\n  return useAsParent ? createElement(useAsParent, additionalProps, content) : content;\n}"],"names":["workers","console","debug","cleanupNavigateur","connexion","deconnecter","window","location","props","i18n","setSectionAfficher","useWorkers","t","useTranslation","etatConnexion","useEtatConnexion","useState","showModalInfo","setShowModalInfo","handlerCloseModalInfo","useCallback","brand","useMemo","Brand","Link","title","Menu","labelMenu","onSelect","eventKey","id","Item","DropDownLanguage","changeLanguage","ModalInfo","show","fermer","manifest","sauvegarderCertificatPem","usager","chainePem","dataAdditionnel","certForge","forgePki","certificateFromPem","nomUsager","subject","getField","value","Error","copieChainePem","length","join","params","requete","ca","pop","certificat","usagerDao","updateUsager","getUserIdFromCertificat","extraireExtensionsMillegrille","userId","genererCle","genererClePrivee","cles","fingerprintPublicKey","Buffer","from","publicKey","publicKeyBytes","toString","genererCsrNavigateur","pem","csrNavigateur","fingerprint_pk","csr","clePriveePem","initialiserCompteUsager","opts","getUsager","genererCsr","regenerer","verifierDateRenouvellementCertificat","certificatValide","canRenew","fingerprintPk","warn","nouvellesCles","validityNotAfter","validity","notAfter","getTime","validityNotBefore","notBefore","validityRenew","Date","chargerUsager","fingerprintCourant","hostname","data","fingerprintPkNouveau","fingerprintPkCourant","axios","method","url","timeout","reponse","reponseEnveloppe","infoUsager","JSON","parse","contenu","authentifie","auth","DATABASES","CACHE_STORAGE_NAMES","databases","indexedDB","log","promisesDelete","databaseName","promise","Promise","resolve","reject","request","deleteDatabase","onblocked","e","onerror","err","onsuccess","push","clearClesDechiffrees","caches","cacheStorage","cacheName","delete","all","module","exports","date","version","_excluded","_excluded2","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","i","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","hasChildren","node","checkLength","base","children","getChildren","getAsArray","Array","isArray","nodesToString","i18nOptions","stringNode","childrenArray","keepArray","transSupportBasicHtmlNodes","transKeepBasicHtmlNodesFor","child","childIndex","concat","isValidElement","childPropsCount","shouldKeepChild","indexOf","type","childChildren","i18nIsDynamicList","content","_typeof","format","clone","_objectWithoutProperties","renderNodes","targetString","combinedTOpts","shouldUnescape","emptyChildrenButNeedsHandling","RegExp","test","getData","childs","assign","ast","HTML","renderInner","rootReactNode","mappedChildren","mapAST","prototype","call","every","hasValidReactChildren","pushTranslatedJSX","inner","mem","isVoid","dummy","cloneElement","undefined","reactNode","astNode","reactNodes","reduce","translationContent","services","interpolator","interpolate","language","tmp","parseInt","name","attrs","newTarget","mergeProps","isElement","isValidTranslationWithChildren","voidElement","isEmptyTransWithHTML","isKnownComponent","hasOwnProperty","_inner","Number","isNaN","parseFloat","createElement","_inner3","_inner4","wrapTextNodes","transWrapTextNodes","_content","unescape","Trans","_ref","count","parent","i18nKey","context","_ref$tOptions","tOptions","values","defaults","components","ns","i18nFromProps","tFromProps","additionalProps","_ref2","useContext","I18nContext","i18nFromContext","defaultNSFromContext","defaultNS","getI18n","warnOnce","bind","k","reactI18nextOptions","getDefaults","options","react","namespaces","defaultValue","transEmptyNodeValue","hashTransKey","interpolationOverride","interpolation","prefix","suffix","useAsParent","defaultTransParent"],"sourceRoot":""}
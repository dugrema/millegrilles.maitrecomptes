{"version":3,"file":"static/js/760.a1b7c11e.chunk.js","mappings":"qZAee,SAASA,EAAaC,GAEnC,IAAQC,EAAaD,EAAbC,SAEFC,GAAUC,EAAAA,EAAAA,MACVC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MAAc,GACzBC,GAAgBC,EAAAA,EAAAA,MAEdC,EAAcR,EAAdQ,UAEFC,GAAqBC,EAAAA,EAAAA,UAAQ,WACjC,QAAIN,GAEoC,kBADrBA,EAASO,YAAc,CAAC,GACzBC,iBACpB,GAAG,CAACR,IAEJ,GAAwDS,EAAAA,EAAAA,UAAS,IAAG,eAA7DC,EAAoB,KAAEC,EAAuB,KACpD,GAA0CF,EAAAA,EAAAA,WAAS,GAAK,eAAjDG,EAAa,KAAEC,EAAgB,MAEtCC,EAAAA,EAAAA,YAAU,WAELhB,GAAYI,GACbE,EAAUW,2BAA2BC,MAAK,SAAAC,GACxC,IAAMC,EAAeD,EAAQE,UAC7BC,QAAQC,MAAM,0BAA2BH,GACzCP,EAAwBO,EAC1B,IAAGI,OAAM,SAAAC,GAAMH,QAAQI,MAAM,4CAA6CD,EAAI,GAElF,GAAG,CAACzB,EAAUI,EAAeE,IAE7B,IAAMqB,EAAkBpB,EAAmB,sBAAsB,GAEjE,OACE,0BACE,UAACqB,EAAA,EAAG,YACA,UAACC,EAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,EAAE,WAEf,eAAGC,UAAW,UAAYL,EAAgB,WAAC,cAAGK,UAAU,wBAAyB,KAAO9B,EAAS+B,cAEjG,SAACC,EAAsB,CACrBpB,cAAeA,EACfC,iBAAkBA,EAClBlB,SAAUA,KAEZ,SAACsC,EAAgB,CACbC,UAAUtB,EACVjB,SAAUA,QAGlB,UAACgC,EAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,EAAE,WACf,yBAAI,SAACM,EAAA,EAAK,UAAC,0BAEX,SAACC,EAAiB,CAChB1B,qBAAsBA,EACtBL,mBAAoBA,WAOpC,CAEA,SAAS+B,EAAkB1C,GAEzB,IAAQgB,EAAyBhB,EAAzBgB,qBAEF2B,EAAmB3C,EAAM4C,YAIzBC,GAAOjC,EAAAA,EAAAA,UAAQ,WACnB,IAAII,EAAsB,OAAO,KACjC,IAAI6B,GAAI,OAAO7B,GAQf,OAPA6B,EAAKC,MAAK,SAACC,EAAEC,GACX,IAAMC,EAAOF,EAAEG,aAAe,GACxBC,EAAOH,EAAEE,aAAe,GAE9B,OAAGD,IAASE,EAAa,EAClBF,EAAKG,cAAcD,EAC5B,IACON,CACT,GAAG,CAAC7B,IAEJ,GAAqDJ,EAAAA,EAAAA,UAAQ,WAC3D,IAAIiC,EAAM,MAAO,CAAC,KAAM,KAAM,MAI9B,IAKqB,EALfQ,EAAW,IAAIC,IAAIC,OAAOC,SAASC,MACnCb,EAAcD,GAAoBU,EAASK,SAASC,SAAS,UAAU,QAAQ,MAG/EC,EAAsB,CAAC,EAAC,UACbf,GAAI,IAArB,IAAI,EAAJ,qBAAuB,CAAC,IAAdgB,EAAG,QACLC,EAAW,GAIjB,GAHGD,EAAIE,KAAKD,EAASE,KAAKH,EAAIE,KAC3BF,EAAII,OAAOH,EAASE,KAAKH,EAAII,OAE7BH,EAASI,OAAS,EAAG,CAAC,IACM,EADP,UACDJ,GAAQ,IAA7B,IAAI,EAAJ,qBAA+B,CAAC,IAAtBK,EAAO,QAETT,EADa,IAAIJ,IAAIa,GACCT,SACxBU,EAAuBR,EAAoBF,GAC3CU,IACFA,EAAuB,GACvBR,EAAoBF,GAAYU,GAElCA,EAAqBJ,KAAKH,EAC5B,CAAC,+BACH,CACF,CAEA,+BAEA,MAAO,CAACR,EAAUT,EAAagB,EACjC,GAAG,CAACf,EAAMF,IAAkB,eAhCrBU,EAAQ,KAAET,EAAW,KAAEgB,EAAmB,KAkCjD,OAAI5C,GAAwD,IAAhCA,EAAqBkD,QAU/C,4BACE,SAACG,EAAA,EAAG,CAACjC,UAAU,2BAA0B,UACvC,SAACkC,EAAqB,CACpBC,QAASlB,EACTT,YAAaA,EACbC,KAAMe,EAAoBP,EAASK,eAGvC,SAACc,EAAe,CACdD,QAASlB,EACTT,YAAaA,EACbgB,oBAAqBA,KAEvB,SAACY,EAAe,CACdD,QAASlB,EACTT,YAAaA,EACbgB,oBAAqBA,EACrBK,OAAO,QAzBT,UAACQ,EAAA,EAAK,CAACC,QAAQ,OAAM,WACnB,SAACD,EAAA,EAAME,QAAO,WAAC,SAAClC,EAAA,EAAK,UAAC,0BACtB,SAACA,EAAA,EAAK,UAAC,kCA2Bf,CAEA,SAAS6B,EAAsBtE,GAC7B,IAAQ4C,EAAsB5C,EAAtB4C,YAAaC,EAAS7C,EAAT6C,KAEb+B,GAAMC,EAAAA,EAAAA,KAAND,EAER,OAAI/B,EAEGA,EAAKiC,QAAO,SAAAC,GAEjB,YAAiCC,IAA1BD,EAAKE,mBAA4D,IAA1BF,EAAKE,gBACrD,IAAGC,KAAI,SAAArB,GACL,IAAMM,EAAU,IAAIb,IAAIO,EAAIjB,IAExBuC,EAAQ,SAQZ,OANGtB,EAAIuB,SACLD,EAAQP,EAAEf,EAAIwB,eACNxB,EAAIX,cACZiC,EAAQtB,EAAIX,YAAYoC,QAAQ,IAAK,OAIrC,SAACjB,EAAA,EAAIkB,KAAI,CAAoB9B,KAAMU,EAAQV,KAAM+B,IAAI,sBAAqB,SACvEL,GADYhB,EAAQV,KAI3B,IArBiB,EAsBnB,CAEA,SAASe,EAAgBxE,GACvB,IAAQuE,EAAiCvE,EAAjCuE,QAASX,EAAwB5D,EAAxB4D,oBACXK,EAAQjE,EAAMiE,QAAS,EAEvBwB,GAAuB7E,EAAAA,EAAAA,UAAQ,WACnC,OAAIgD,EAIyB8B,OAAOC,KAAK/B,GACtCkB,QAAO,SAAAC,GACN,OAAGA,IAASR,EAAQb,WACZqB,EAAKpB,SAAS,UAAkBM,GAC3BA,EACf,IAT8B,EAYlC,GAAG,CAACM,EAASX,EAAqBK,IAElC,GAAmC,IAAhCwB,EAAqBvB,OAAc,MAAO,GAE7C,IAAI0B,EAAQ,KAWZ,OATEA,EADC3B,GAEC,iCACE,wBAAI,eACJ,uBAAG,0HAIM,wBAAI,uBAGjB,2BACG2B,GAED,SAACvB,EAAA,EAAG,CAACjC,UAAU,2BAA0B,SACtCqD,EAAqBP,KAAI,SAAAH,GACxB,IAAI3C,EAAY,GACZ+C,EAAQJ,EAKZ,OAJGA,EAAKpB,SAAS,YACfvB,GAAa,WACb+C,EAAQA,EAAMU,MAAM,EAAG,GAAK,QAAUV,EAAMU,MAAM,MAGlD,SAACxB,EAAA,EAAIkB,KAAI,CAAYnD,UAAWA,EAAWqB,KAAM,WAAasB,EAAK,SAChEI,GADYJ,EAInB,QAIR,CAGA,SAASzC,EAAuBtC,GAC9B,IAAQkB,EAA8ClB,EAA9CkB,cAAeC,EAA+BnB,EAA/BmB,iBAAkBlB,EAAaD,EAAbC,SAIjC2E,GAAMC,EAAAA,EAAAA,KAAND,EACF1E,GAAUC,EAAAA,EAAAA,MACVG,GAAWC,EAAAA,EAAAA,MAAc,GAC/B,GAA0CuF,EAAAA,EAAAA,MAAkB,eAArDC,EAAa,KAAEC,EAAgB,KAEhCC,GAA6BC,EAAAA,EAAAA,cAAY,SAAAC,GAC3ChF,GAAiB,EACrB,GAAG,CAACA,IAiCJ,OA9BAC,EAAAA,EAAAA,YAAU,WACR,GAAId,EAAJ,CACAoB,QAAQC,MAAM,2BAA4BrB,GAC1C,IAAM+B,EAAY/B,EAAS+B,UACrB+D,EAAuB9F,EAAS+F,cAElCN,IAEFO,EAAAA,EAAAA,GAAM,CAACC,OAAQ,OAAQxC,IAAK,mBAAoByC,KAAM,CAACnE,UAAAA,EAAWqB,SAAUH,OAAOC,SAASE,SAAU0C,qBAAAA,KACnG9E,MAAK,SAAAC,GACJ,IAAMkF,EAAUC,KAAKC,MAAMpF,EAAQiF,KAAKC,SACxC/E,QAAQC,MAAM,sCAAuC8E,GACrDT,EAAiBS,EACnB,IACC7E,OAAM,SAAAC,GAAG,OAAEH,QAAQI,MAAM,4BAA6BD,EAAI,GAb3C,CAetB,GAAG,CAAC3B,EAASI,EAAUyF,EAAeC,EAAkB7E,KAGxDC,EAAAA,EAAAA,YAAU,WACJ2E,IACJrE,QAAQC,MAAM,+CAAgDoE,KAC3CA,EAAca,YAAc,CAAC,GACTC,qBAAuBd,EAAcc,qBAAuB,CAAC,GAC7EC,aACrBpF,QAAQqF,KAAK,+DACb5F,GAAiB,IAErB,GAAG,CAACjB,EAAS6F,EAAeC,EAAkB7E,KAG1C,UAACsD,EAAA,EAAK,CAACuC,MAAO9F,EAAewD,QAAQ,UAAS,WAC1C,uBAAIE,EAAE,qCACN,uBAAIA,EAAE,qCAEN,UAAC,KAAqB,CAClB1E,QAASA,EACT+G,eAAgBhB,EAChBhG,SAAUA,EACVyE,QAAQ,YAAW,UAAC,KACjB,cAAGtC,UAAU,mBAK9B,CAEA,SAASG,EAAiBvC,GACxB,IAAQiH,EAAuCjH,EAAvCiH,eAAgBhH,EAAuBD,EAAvBC,SAAUuC,EAAaxC,EAAbwC,SAClCd,QAAQC,MAAM,+BAAgC3B,GAI9C,IAAME,GAAUC,EAAAA,EAAAA,MAChB,GAAgCI,EAAAA,EAAAA,MAAa,eAAtCD,EAAQ,KAAE4G,EAAW,KAC5B,GAA0CpB,EAAAA,EAAAA,MAAkB,eAArDC,EAAa,KAAEC,EAAgB,KAGhCmB,GAAkBvG,EAAAA,EAAAA,UAAQ,WAC9B,GAAG4B,IAAalC,IAAayF,EAAgB,OAAO,EACpDrE,QAAQC,MAAM,gGACZrB,EAAUyF,GAEZ,IAAMqB,EAAY9G,EAAS+G,qBAAuB,EAC9CC,GAAW,EAGf,GAAGvB,GAAiBA,EAAca,iBAA+D5B,IAAjDe,EAAca,WAAWS,oBAAmC,CAC1G,IACME,EADaxB,EAAca,WACAS,qBAAuB,EACxD3F,QAAQC,MAAM,iDAAkD4F,GAChED,EAAWF,EAAYG,CACzB,MAAO,GAAGjH,EAAU,CAElB,IAAM+B,EAAY/B,EAAS+B,UACrBmF,EAAUlH,EAASkH,SAAW,CAAC,EAC/BC,EAAuBD,EAAQnB,cACrC3E,QAAQC,MAAM,yCAA0CU,GACxDnC,EAAQQ,UAAUgH,cAAcrF,EAAW,CAACqB,SAAUH,OAAOC,SAASE,SAAU+D,qBAAAA,IAC7EnG,KAAI,yCAAC,WAAMqG,GAAkB,8FACkD,GAA9EjG,QAAQC,MAAM,4CAA6CgG,IAC9B,IAA1BA,EAAmBC,GAAW,iBAK/B,GAJMhB,EAAab,EAAca,YAAW,UAAIb,EAAca,YAAY,CAAC,EACrEiB,EAASF,EAAmBE,QAI/BF,EAA+B,WAAEG,eAAgBH,EAA+B,WAAEG,aAAaC,WAAU,iBAEpC,GADhEC,EAAoBL,EAA+B,WAAEG,aAAaC,aAClEE,EAA2BvB,KAAKC,MAAMqB,EAAkBvB,UAClCyB,WAAW,CAAD,gBAGpC,GAFAxG,QAAQqF,KAAK,0CACNmB,EAA2BD,EAA3BC,WAAYC,EAAeF,EAAfE,YAEhBV,IAAyBU,EAAW,iBAOpC,OANDzG,QAAQC,MAAM,yCACNyG,EAAgCZ,EAAhCY,aAAc/B,EAAkBmB,EAAlBnB,cAChBgC,EAAkB,CACtBD,aAAAA,EAAc/B,cAAAA,EACdgB,oBAAqBQ,EAAOR,oBAC5BiB,iBAAkBT,EAAOS,kBAC1B,WACKC,EAAAA,EAAAA,IAAyBlG,EAAW6F,EAAYG,GAAgB,yBAGhDnI,EAAQsI,UAAUC,UAAUpG,GAAU,QAAtDqG,EAAO,OACbxB,EAAYwB,GAAQ,QAM1B9B,EAAWS,oBAAsB,EACjC3B,OAAOiD,OAAO/B,EAAYe,EAAmBE,QAC7C7B,GAAiB,kBAAID,GAAa,IAAEa,WAAAA,KAAY,4CAEnD,mDArCI,IAsCJhF,MAAM3B,EACX,CAGA,OAFAyB,QAAQC,MAAM,uCAAwC2F,EAAUF,GAEzDE,CACT,GAAG,CAACpH,EAASsC,EAAUlC,EAAU4G,EAAanB,EAAeC,EAAkB/F,IAEzE2I,GAA2B1C,EAAAA,EAAAA,cAAa,SAAA2C,GAC1CnH,QAAQC,MAAM,mDAAoDkH,GAClE,IAAMxG,EAAY/B,EAAS+B,UACrBmF,EAAUlH,EAASkH,QACnBK,EAAS9B,EAAca,WAC7B,GAAGiC,EAASjB,GAAI,CACd,IACMS,EAAkB,CACtBD,aAFsCZ,EAAhCY,aAEQ/B,cAFwBmB,EAAlBnB,cAGpBgB,oBAAqBQ,EAAOR,oBAC5BiB,iBAAkBT,EAAOS,mBAE3BC,EAAAA,EAAAA,IAAyBlG,EAAWwG,EAASd,WAAYM,GACtD/G,MAAI,uBAAE,yFAGL,OAFG2F,GAAgBA,EAAe,yBAElC,SACsB/G,EAAQsI,UAAUC,UAAUpG,GAAU,OAG5D,OAHMqG,EAAO,OACbxB,EAAYwB,GAEZ,SACMxI,EAAQQ,UAAUoI,cAAa,uBAC/B5I,EAAQQ,UAAUqI,YAAW,4CAEpCnH,MAAM3B,EACX,MACEA,EAAS,mCAAqC4I,EAAShH,IAE7D,GAAG,CAAC3B,EAASI,EAAU4G,EAAanB,EAAekB,EAAgBhH,IA0BnE,OAvBAmB,EAAAA,EAAAA,YAAU,WACR,GAAG+F,IACCzF,QAAQC,MAAM,gCAAiCrB,KAE/BA,EAASkH,SAAW,CAAC,GACzBnB,eAAe,CACzB3E,QAAQC,MAAM,oDAAqDrB,GACnE,IAAM+B,EAAY/B,EAAS+B,WAC3B2G,EAAAA,EAAAA,IAA0B9I,EAASmC,GAChCf,KAAI,yCAAC,WAAM2H,GAAa,oFACkD,GAAvEvH,QAAQC,MAAM,0CAA2CsH,IACtDA,EAAc,CAAD,eAEoD,OAFpD,EAC8BA,EAAcC,OAAnDC,EAAG,EAAHA,IAAKf,EAAY,EAAZA,aAAcgB,EAAc,EAAdA,eACpB5B,EAAU,CAAC2B,IAAAA,EAAKf,aAAAA,EAAc/B,cAAe+C,GAAe,SAC5DlJ,EAAQsI,UAAUa,aAAahH,EAAW,CAACA,UAAAA,EAAWmF,QAAAA,IAAS,OACrEN,GAAY,kBAAI5G,GAAQ,IAAEkH,QAAAA,KAAS,2CAExC,mDARI,IASJ5F,MAAM3B,EACX,CAEN,GAAG,CAACC,EAASiH,EAAiB7G,EAAU4G,EAAajH,EAAUuC,IAE3DlC,GAAaA,EAAS+B,WAGtB,UAACoC,EAAA,EAAK,CAACC,QAAQ,OAAOsC,KAAMG,IAAoB3E,EAAS,WACrD,SAACiC,EAAA,EAAME,QAAO,UAAC,mCACf,yBAAG,0GAEuB,uBAAG,kBAAiB,kGAI9C,SAAC,KAA2B,CACxB2E,OAAQhJ,EACRiJ,UAAWX,EACXY,QAASvJ,EACTyE,QAAQ,YAAW,SAAC,qBAfY,EAoB9C,CC5bA,MAjBA,SAAiB1E,GAEb,IAAQyJ,EAAsDzJ,EAAtDyJ,mBAAoBC,EAAkC1J,EAAlC0J,oBAAqBzJ,EAAaD,EAAbC,SAIjD,OAFiBI,EAAAA,EAAAA,OAKb,SAACN,EAAY,CACT0J,mBAAoBA,EACpBC,oBAAqBA,EACrBzJ,SAAUA,IANG,+BASzB,C,uIChBI0J,EAAY,CAAC,UACbC,EAAa,CAAC,WAAY,QAAS,SAAU,UAAW,UAAW,WAAY,SAAU,WAAY,aAAc,KAAM,OAAQ,IAAK,kBAE1I,SAASC,EAAQC,EAAQC,GAAkB,IAAIpE,EAAOD,OAAOC,KAAKmE,GAAS,GAAIpE,OAAOsE,sBAAuB,CAAE,IAAIC,EAAUvE,OAAOsE,sBAAsBF,GAAaC,IAAkBE,EAAUA,EAAQnF,QAAO,SAAUoF,GAAO,OAAOxE,OAAOyE,yBAAyBL,EAAQI,GAAKE,UAAY,KAAMzE,EAAK3B,KAAKqG,MAAM1E,EAAMsE,EAAU,CAAE,OAAOtE,CAAM,CAExV,SAAS2E,EAAcC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUvG,OAAQsG,IAAK,CAAE,IAAIE,EAAyB,MAAhBD,UAAUD,GAAaC,UAAUD,GAAK,CAAC,EAAOA,EAAI,EAAKX,EAAQnE,OAAOgF,IAAS,GAAMC,SAAQ,SAAUC,IAAOC,EAAAA,EAAAA,GAAgBN,EAAQK,EAAKF,EAAOE,GAAO,IAAelF,OAAOoF,0BAA6BpF,OAAOqF,iBAAiBR,EAAQ7E,OAAOoF,0BAA0BJ,IAAmBb,EAAQnE,OAAOgF,IAASC,SAAQ,SAAUC,GAAOlF,OAAOsF,eAAeT,EAAQK,EAAKlF,OAAOyE,yBAAyBO,EAAQE,GAAO,GAAM,CAAE,OAAOL,CAAQ,CAOrhB,SAASU,EAAYC,EAAMC,GACzB,IAAKD,EAAM,OAAO,EAClB,IAAIE,EAAOF,EAAKlL,MAAQkL,EAAKlL,MAAMqL,SAAWH,EAAKG,SACnD,OAAIF,EAAoBC,EAAKlH,OAAS,IAC7BkH,CACX,CAEA,SAASE,EAAYJ,GACnB,OAAKA,EACEA,EAAKlL,MAAQkL,EAAKlL,MAAMqL,SAAWH,EAAKG,SAD7B,EAEpB,CASA,SAASE,EAAW/E,GAClB,OAAOgF,MAAMC,QAAQjF,GAAQA,EAAO,CAACA,EACvC,CASO,SAASkF,EAAcL,EAAUM,GACtC,IAAKN,EAAU,MAAO,GACtB,IAAIO,EAAa,GACbC,EAAgBN,EAAWF,GAC3BS,EAAYH,EAAYI,4BAA8BJ,EAAYK,2BAA6BL,EAAYK,2BAA6B,GAuC5I,OAtCAH,EAAclB,SAAQ,SAAUsB,EAAOC,GACrC,GAAqB,kBAAVD,EACTL,GAAc,GAAGO,OAAOF,QACnB,IAAIG,EAAAA,EAAAA,gBAAeH,GAAQ,CAChC,IAAII,EAAkB3G,OAAOC,KAAKsG,EAAMjM,OAAOkE,OAC3CoI,EAAkBR,EAAUS,QAAQN,EAAMO,OAAS,EACnDC,EAAgBR,EAAMjM,MAAMqL,SAEhC,IAAKoB,GAAiBH,GAAuC,IAApBD,EACvCT,GAAc,IAAIO,OAAOF,EAAMO,KAAM,WAChC,GAAKC,GAAmBH,GAAuC,IAApBD,EAE3C,GAAIJ,EAAMjM,MAAM0M,kBACrBd,GAAc,IAAIO,OAAOD,EAAY,OAAOC,OAAOD,EAAY,UAC1D,GAAII,GAAuC,IAApBD,GAAkD,kBAAlBI,EAC5Db,GAAc,IAAIO,OAAOF,EAAMO,KAAM,KAAKL,OAAOM,EAAe,MAAMN,OAAOF,EAAMO,KAAM,SACpF,CACL,IAAIG,EAAUjB,EAAce,EAAed,GAC3CC,GAAc,IAAIO,OAAOD,EAAY,KAAKC,OAAOQ,EAAS,MAAMR,OAAOD,EAAY,IACrF,MAREN,GAAc,IAAIO,OAAOD,EAAY,OAAOC,OAAOD,EAAY,IASnE,MAAO,GAAc,OAAVD,GACTW,EAAAA,EAAAA,IAAK,kFACA,GAAuB,YAAnBC,EAAAA,EAAAA,GAAQZ,GAAqB,CACtC,IAAIa,EAASb,EAAMa,OACfC,GAAQC,EAAAA,EAAAA,GAAyBf,EAAOtC,GAExChE,EAAOD,OAAOC,KAAKoH,GAEvB,GAAoB,IAAhBpH,EAAKzB,OAAc,CACrB,IAAI+I,EAAQH,EAAS,GAAGX,OAAOxG,EAAK,GAAI,MAAMwG,OAAOW,GAAUnH,EAAK,GACpEiG,GAAc,KAAKO,OAAOc,EAAO,KACnC,MACEL,EAAAA,EAAAA,IAAK,mJAAoJX,EAE7J,MACEW,EAAAA,EAAAA,IAAK,qKAAsKX,EAE/K,IACOL,CACT,CAEA,SAASsB,EAAY7B,EAAU8B,EAAcC,EAAMzB,EAAa0B,EAAeC,GAC7E,GAAqB,KAAjBH,EAAqB,MAAO,GAChC,IAAIrB,EAAYH,EAAYK,4BAA8B,GACtDuB,EAAgCJ,GAAgB,IAAIK,OAAO1B,EAAU2B,KAAK,MAAMC,KAAKP,GACzF,IAAK9B,IAAakC,EAA+B,MAAO,CAACJ,GACzD,IAAI3G,EAAO,CAAC,GAEZ,SAASmH,EAAQC,GACKrC,EAAWqC,GACjBjD,SAAQ,SAAUsB,GACT,kBAAVA,IACPhB,EAAYgB,GAAQ0B,EAAQrC,EAAYW,IAAoC,YAAnBY,EAAAA,EAAAA,GAAQZ,KAAwBG,EAAAA,EAAAA,gBAAeH,IAAQvG,OAAOiD,OAAOnC,EAAMyF,GAC1I,GACF,CAEA0B,CAAQtC,GACR,IAAIwC,EAAMC,EAAAA,EAAKnH,MAAM,MAAMwF,OAAOgB,EAAc,SAE5CY,EAAOzD,EAAcA,EAAc,CAAC,EAAG9D,GAAO6G,GAElD,SAASW,EAAY/B,EAAOf,EAAM+C,GAChC,IAAIL,EAAStC,EAAYW,GACrBiC,EAAiBC,EAAOP,EAAQ1C,EAAKG,SAAU4C,GACnD,OAvFJ,SAA+B5C,GAC7B,MAAiD,mBAA7C3F,OAAO0I,UAAUC,SAASC,KAAKjD,IAC5BA,EAASkD,OAAM,SAAUtC,GAC9B,OAAOG,EAAAA,EAAAA,gBAAeH,EACxB,GACF,CAkFWuC,CAAsBZ,IAAqC,IAA1BM,EAAehK,OAAe0J,EAASM,CACjF,CAEA,SAASO,EAAkBxC,EAAOyC,EAAOC,EAAKnE,EAAGoE,GAC3C3C,EAAM4C,QAAO5C,EAAMZ,SAAWqD,GAClCC,EAAI3K,MAAK8K,EAAAA,EAAAA,cAAa7C,EAAO3B,EAAcA,EAAc,CAAC,EAAG2B,EAAMjM,OAAQ,CAAC,EAAG,CAC7E4K,IAAKJ,IACHoE,OAAS5J,EAAY0J,GAC3B,CAEA,SAASP,EAAOY,EAAWC,EAASf,GAClC,IAAIgB,EAAa1D,EAAWwD,GAE5B,OADexD,EAAWyD,GACVE,QAAO,SAAUP,EAAKzD,EAAMV,GAC1C,IAAI2E,EAAqBjE,EAAKG,UAAYH,EAAKG,SAAS,IAAMH,EAAKG,SAAS,GAAGsB,SAAWS,EAAKgC,SAASC,aAAaC,YAAYpE,EAAKG,SAAS,GAAGsB,QAASoB,EAAMX,EAAKmC,UAEtK,GAAkB,QAAdrE,EAAKsB,KAAgB,CACvB,IAAIgD,EAAMP,EAAWQ,SAASvE,EAAKwE,KAAM,MACpCF,GAAgC,IAAzBvB,EAAc/J,QAAgB+J,EAAc,GAAG/C,EAAKwE,QAAOF,EAAMvB,EAAc,GAAG/C,EAAKwE,OAC9FF,IAAKA,EAAM,CAAC,GACjB,IAAIvD,EAA2C,IAAnCvG,OAAOC,KAAKuF,EAAKyE,OAAOzL,OAhG5C,SAAoBwG,EAAQH,GAC1B,IAAIqF,EAAYtF,EAAc,CAAC,EAAGC,GAGlC,OADAqF,EAAU5P,MAAQ0F,OAAOiD,OAAO+B,EAAO1K,MAAOuK,EAAOvK,OAC9C4P,CACT,CA2F2DC,CAAW,CAC5D7P,MAAOkL,EAAKyE,OACXH,GAAOA,EACNM,GAAY1D,EAAAA,EAAAA,gBAAeH,GAC3B8D,EAAiCD,GAAa7E,EAAYC,GAAM,KAAUA,EAAK8E,YAC/EC,EAAuB1C,GAAoD,YAAnBV,EAAAA,EAAAA,GAAQZ,IAAuBA,EAAM4C,QAAUiB,EACvGI,EAAyC,YAAtBrD,EAAAA,EAAAA,GAAQxB,IAAuC,OAAbA,GAAqB3F,OAAOyK,eAAe7B,KAAKjD,EAAUH,EAAKwE,MAExH,GAAqB,kBAAVzD,EAAoB,CAC7B,IAAIgB,EAAQG,EAAKgC,SAASC,aAAaC,YAAYrD,EAAO8B,EAAMX,EAAKmC,UACrEZ,EAAI3K,KAAKiJ,EACX,MAAO,GAAIhC,EAAYgB,IAAU8D,EAAgC,CAE7DtB,EAAkBxC,EADN+B,EAAY/B,EAAOf,EAAM+C,GACLU,EAAKnE,EACvC,MAAO,GAAIyF,EAAsB,CACjC,IAAIG,EAASjC,EAAOc,EAAY/D,EAAKG,SAAU4C,GAE/CU,EAAI3K,MAAK8K,EAAAA,EAAAA,cAAa7C,EAAO3B,EAAcA,EAAc,CAAC,EAAG2B,EAAMjM,OAAQ,CAAC,EAAG,CAC7E4K,IAAKJ,IACH4F,GACN,MAAO,GAAIC,OAAOC,MAAMC,WAAWrF,EAAKwE,OAAQ,CAC9C,GAAIQ,EAGFzB,EAAkBxC,EAFJ+B,EAAY/B,EAAOf,EAAM+C,GAELU,EAAKnE,EAAGU,EAAK8E,kBAC1C,GAAIrE,EAAYI,4BAA8BD,EAAUS,QAAQrB,EAAKwE,OAAS,EACnF,GAAIxE,EAAK8E,YACPrB,EAAI3K,MAAKwM,EAAAA,EAAAA,eAActF,EAAKwE,KAAM,CAChC9E,IAAK,GAAGuB,OAAOjB,EAAKwE,KAAM,KAAKvD,OAAO3B,UAEnC,CACL,IAAIiG,EAAUtC,EAAOc,EAAY/D,EAAKG,SAAU4C,GAEhDU,EAAI3K,MAAKwM,EAAAA,EAAAA,eAActF,EAAKwE,KAAM,CAChC9E,IAAK,GAAGuB,OAAOjB,EAAKwE,KAAM,KAAKvD,OAAO3B,IACrCiG,GACL,MACK,GAAIvF,EAAK8E,YACdrB,EAAI3K,KAAK,IAAImI,OAAOjB,EAAKwE,KAAM,YAC1B,CACL,IAAIgB,EAAUvC,EAAOc,EAAY/D,EAAKG,SAAU4C,GAEhDU,EAAI3K,KAAK,IAAImI,OAAOjB,EAAKwE,KAAM,KAAKvD,OAAOuE,EAAS,MAAMvE,OAAOjB,EAAKwE,KAAM,KAC9E,CACF,MAAO,GAAuB,YAAnB7C,EAAAA,EAAAA,GAAQZ,IAAwB6D,EAGP,IAAzB5E,EAAKG,SAASnH,QAAgBiL,EACvCR,EAAI3K,MAAK8K,EAAAA,EAAAA,cAAa7C,EAAO3B,EAAcA,EAAc,CAAC,EAAG2B,EAAMjM,OAAQ,CAAC,EAAG,CAC7E4K,IAAKJ,IACH2E,IAEJR,EAAI3K,MAAK8K,EAAAA,EAAAA,cAAa7C,EAAO3B,EAAcA,EAAc,CAAC,EAAG2B,EAAMjM,OAAQ,CAAC,EAAG,CAC7E4K,IAAKJ,UAT6C,CACpD,IAAImC,EAAUzB,EAAKG,SAAS,GAAK8D,EAAqB,KAClDxC,GAASgC,EAAI3K,KAAK2I,EACxB,CASF,MAAO,GAAkB,SAAdzB,EAAKsB,KAAiB,CAC/B,IAAImE,EAAgBhF,EAAYiF,mBAE5BC,EAAWvD,EAAiB3B,EAAYmF,SAAS1D,EAAKgC,SAASC,aAAaC,YAAYpE,EAAKyB,QAASoB,EAAMX,EAAKmC,WAAanC,EAAKgC,SAASC,aAAaC,YAAYpE,EAAKyB,QAASoB,EAAMX,EAAKmC,UAE9LoB,EACFhC,EAAI3K,MAAKwM,EAAAA,EAAAA,eAAcG,EAAe,CACpC/F,IAAK,GAAGuB,OAAOjB,EAAKwE,KAAM,KAAKvD,OAAO3B,IACrCqG,IAEHlC,EAAI3K,KAAK6M,EAEb,CAEA,OAAOlC,CACT,GAAG,GACL,CAMA,OAAOrD,EAJM6C,EAAO,CAAC,CACnBU,OAAO,EACPxD,SAAUA,GAAY,KACpBwC,EAAKtC,EAAWF,GAAY,KACN,GAC5B,CAEO,SAAS5I,EAAMsO,GACpB,IAAI1F,EAAW0F,EAAK1F,SAChB2F,EAAQD,EAAKC,MACbC,EAASF,EAAKE,OACdC,EAAUH,EAAKG,QACfC,EAAUJ,EAAKI,QACfC,EAAgBL,EAAKM,SACrBA,OAA6B,IAAlBD,EAA2B,CAAC,EAAIA,EAC3CE,EAASP,EAAKO,OACdC,EAAWR,EAAKQ,SAChBC,EAAaT,EAAKS,WAClBC,EAAKV,EAAKU,GACVC,EAAgBX,EAAK3D,KACrBuE,EAAaZ,EAAKnM,EAClB0I,EAAiByD,EAAKzD,eACtBsE,GAAkB5E,EAAAA,EAAAA,GAAyB+D,EAAMnH,GAEjDiI,GAAQC,EAAAA,EAAAA,YAAWC,EAAAA,KAAgB,CAAC,EACpCC,EAAkBH,EAAMzE,KACxB6E,EAAuBJ,EAAMK,UAE7B9E,EAAOsE,GAAiBM,IAAmBG,EAAAA,EAAAA,MAE/C,IAAK/E,EAEH,OADAgF,EAAAA,EAAAA,IAAS,4EACF/G,EAGT,IAAIzG,EAAI+M,GAAcvE,EAAKxI,EAAEyN,KAAKjF,IAAS,SAAUkF,GACnD,OAAOA,CACT,EAEInB,IAASE,EAASF,QAAUA,GAEhC,IAAIoB,EAAsBjI,EAAcA,EAAc,CAAC,GAAGkI,EAAAA,EAAAA,OAAgBpF,EAAKqF,SAAWrF,EAAKqF,QAAQC,OAEnGC,EAAalB,GAAM7M,EAAE6M,IAAMQ,GAAwB7E,EAAKqF,SAAWrF,EAAKqF,QAAQP,UACpFS,EAAmC,kBAAfA,EAA0B,CAACA,GAAcA,GAAc,CAAC,eAC5E,IAAIC,EAAerB,GAAY7F,EAAcL,EAAUkH,IAAwBA,EAAoBM,qBAAuB3B,EACtH4B,EAAeP,EAAoBO,aACnClI,EAAMsG,IAAY4B,EAAeA,EAAaF,GAAgBA,GAC9DG,EAAwBzB,EAASD,EAAS2B,cAAgB,CAC5DA,cAAe1I,EAAcA,EAAc,CAAC,EAAG+G,EAAS2B,eAAgB,CAAC,EAAG,CAC1EC,OAAQ,MACRC,OAAQ,SAIR7F,EAAgB/C,EAAcA,EAAcA,EAAcA,EAAc,CAAC,EAAG+G,GAAW,CAAC,EAAG,CAC7FL,MAAOA,GACNM,GAASyB,GAAwB,CAAC,EAAG,CACtCH,aAAcA,EACdnB,GAAIkB,IAIFhG,EAAUO,EAAYsE,GAAcnG,EADtBT,EAAMhG,EAAEgG,EAAKyC,GAAiBuF,EACexF,EAAMmF,EAAqBlF,EAAeC,GACrG6F,OAAyBnO,IAAXiM,EAAuBA,EAASsB,EAAoBa,mBACtE,OAAOD,GAAc3C,EAAAA,EAAAA,eAAc2C,EAAavB,EAAiBjF,GAAWA,CAC9E,C","sources":["Applications.js","Accueil.js","../node_modules/react-i18next/dist/es/Trans.js"],"sourcesContent":["import axios from 'axios'\n\nimport React, { useState, useEffect, useCallback, useMemo } from 'react'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Nav from 'react-bootstrap/Nav'\nimport Alert from 'react-bootstrap/Alert'\n\nimport { useTranslation, Trans } from 'react-i18next'\n\nimport {BoutonAjouterWebauthn, BoutonMajCertificatWebauthn, preparerNouveauCertificat} from './WebAuthn'\n\nimport useWorkers, { useEtatPret, useUsagerDb, useEtatConnexion, useUsagerWebAuth } from './WorkerContext'\nimport { sauvegarderCertificatPem } from './comptesUtil'\n\nexport default function Applications(props) {\n\n  const { erreurCb } = props\n\n  const workers = useWorkers(),\n        etatPret = useEtatPret(),\n        usagerDb = useUsagerDb()[0],\n        etatConnexion = useEtatConnexion()\n\n  const { connexion } = workers\n\n  const usagerProprietaire = useMemo(()=>{\n    if(!usagerDb) return false\n    const extensions = usagerDb.extensions || {}\n    return extensions.delegationGlobale === 'proprietaire'\n  }, [usagerDb])\n\n  const [applicationsExternes, setApplicationsExternes] = useState([])\n  const [webauthnActif, setWebauthnActif] = useState(true)  // Par defaut, on assume actif (pas de warning).\n\n  useEffect(()=>{\n    // Charger liste des apps\n    if(etatPret && etatConnexion) {\n      connexion.requeteListeApplications().then(reponse=>{\n        const applications = reponse.resultats\n        console.debug(\"Liste applications : %O\", applications)\n        setApplicationsExternes(applications)\n      }).catch(err=>{console.error(\"Erreur chargement liste applications : %O\", err)})\n    }\n  }, [etatPret, etatConnexion, connexion])\n\n  const classNameUsager = usagerProprietaire?'usager-proprietaire':''\n\n  return (\n    <div>\n      <Row>\n          <Col xs={12} md={6}>\n  \n              <p className={'usager ' + classNameUsager}><i className='fa fa-user-circle-o' />{' @' + usagerDb.nomUsager}</p>\n\n              <DemanderEnregistrement \n                webauthnActif={webauthnActif}\n                setWebauthnActif={setWebauthnActif}\n                erreurCb={erreurCb} />\n\n              <UpdateCertificat\n                  disabled={webauthnActif?false:true}\n                  erreurCb={erreurCb} />\n\n          </Col>\n          <Col xs={12} md={6}>\n              <h2><Trans>Applications.titre</Trans></h2>\n\n              <ListeApplications \n                applicationsExternes={applicationsExternes} \n                usagerProprietaire={usagerProprietaire} />\n          </Col>\n      </Row>\n\n    </div>\n  )\n\n}\n\nfunction ListeApplications(props) {\n\n  const { applicationsExternes } = props\n\n  const typeAdresseProps = props.typeAdresse\n  // console.debug(\"ListeApplications apps : \", applicationsExternes)\n\n  // Combiner et trier liste d'applications internes et externes\n  const apps = useMemo(()=>{\n    if(!applicationsExternes) return null\n    var apps = [...applicationsExternes]\n    apps.sort((a,b)=>{\n      const nomA = a.application || '',\n            nomB = b.application || ''\n\n      if(nomA === nomB) return 0\n      return nomA.localeCompare(nomB)\n    })\n    return apps\n  }, [applicationsExternes])\n\n  const [urlLocal, typeAdresse, adressesParHostname] = useMemo(()=>{\n    if(!apps) return [null, null, null]\n\n    // console.debug(\"ListeApplications applicationsExternes \", applicationsExternes)\n\n    const urlLocal = new URL(window.location.href)\n    const typeAdresse = typeAdresseProps || urlLocal.hostname.endsWith('.onion')?'onion':'url'\n\n    // Separer applications par site\n    const adressesParHostname = {}\n    for(const app of apps) {\n      const adresses = []\n      if(app.url) adresses.push(app.url)\n      if(app.onion) adresses.push(app.onion)\n\n      if(adresses.length > 0) {\n        for(const adresse of adresses) {\n          const urlAdresse = new URL(adresse)\n          const hostname = urlAdresse.hostname\n          let listeAppsParHostname = adressesParHostname[hostname]\n          if(!listeAppsParHostname) {\n            listeAppsParHostname = []\n            adressesParHostname[hostname] = listeAppsParHostname\n          }\n          listeAppsParHostname.push(app)\n        }\n      }\n    }\n\n    // console.debug(\"urlLocal %O, typeAdresse %O, adresseParHostname %O\", urlLocal, typeAdresse, adressesParHostname)\n\n    return [urlLocal, typeAdresse, adressesParHostname]\n  }, [apps, typeAdresseProps])\n\n  if(!applicationsExternes || applicationsExternes.length === 0) {\n    return (\n      <Alert variant=\"dark\">\n        <Alert.Heading><Trans>Applications.titre</Trans></Alert.Heading>\n        <Trans>Applications.nondisponibles</Trans>\n      </Alert>\n    )\n  }\n\n  return (\n    <div>\n      <Nav className=\"flex-column applications\">\n        <ListeApplicationsSite \n          urlSite={urlLocal} \n          typeAdresse={typeAdresse} \n          apps={adressesParHostname[urlLocal.hostname]} />\n      </Nav>\n\n      <ListeSatellites\n        urlSite={urlLocal} \n        typeAdresse={typeAdresse} \n        adressesParHostname={adressesParHostname} />\n\n      <ListeSatellites\n        urlSite={urlLocal} \n        typeAdresse={typeAdresse} \n        adressesParHostname={adressesParHostname} \n        onion={true} />\n\n    </div>\n  )\n}\n\nfunction ListeApplicationsSite(props) {\n  const { typeAdresse, apps } = props\n\n  const { t } = useTranslation()\n\n  if(!apps) return ''\n\n  return apps.filter(item=>{\n    // Retirer Web Services (aucune interface usager)\n    return item.supporte_usagers === undefined || item.supporte_usagers !== false\n  }).map(app=>{\n    const adresse = new URL(app[typeAdresse])\n\n    let label = 'noname'\n    // Utiliser property pour nom application traduite si disponible\n    if(app.nameprop) {\n      label = t(app.name_property)\n    } else if(app.application) {\n      label = app.application.replace('_', ' ')\n    }\n\n    return (\n      <Nav.Link key={adresse.href} href={adresse.href} rel=\"noopener noreferrer\">\n        {label}\n      </Nav.Link>\n    )\n  })\n}\n\nfunction ListeSatellites(props) {\n  const { urlSite, adressesParHostname } = props\n  const onion = props.onion || false\n\n  const listeSatellitesTiers = useMemo(()=>{\n    if(!adressesParHostname) return []\n\n    // console.debug(\"ListeSatellites adresseParHostname \", adressesParHostname)\n\n    const listeSatellitesTiers = Object.keys(adressesParHostname)\n      .filter(item=>{\n        if(item === urlSite.hostname) return false  // Site courant\n        else if(item.endsWith('.onion')) return onion  // Site .onion, retourner true si on veut ce type\n        else return !onion  // Site url (pas .onion), retourner true si on ne veut pas le type .onion\n      })\n\n    return listeSatellitesTiers\n  }, [urlSite, adressesParHostname, onion])\n\n  if(listeSatellitesTiers.length === 0) return ''\n\n  let titre = null\n  if(onion) {\n    titre = (\n      <>\n        <h4>Sites Tor</h4>\n        <p>Note : les hyperliens .onion requierent un navigateur qui a acces au reseau Tor (e.g. Brave en mode 'prive tor').</p>\n      </>\n    )\n\n  } else titre = <h4>Sites alternatifs</h4>\n\n  return (\n    <div>\n      {titre}\n\n      <Nav className=\"flex-column applications\">\n        {listeSatellitesTiers.map(item=>{\n          let className = ''\n          let label = item\n          if(item.endsWith('.onion')) {\n            className += ' tor-nav'\n            label = label.slice(0, 8) + '[...]' + label.slice(48)\n          }\n          return (\n            <Nav.Link key={item} className={className} href={'https://' + item}>\n              {label}\n            </Nav.Link>\n          )\n        })}\n      </Nav>\n    </div>\n  )\n}\n\n/** Section qui detecte si on doit ajouter une methode d'authentification forte. */\nfunction DemanderEnregistrement(props) {\n  const { webauthnActif, setWebauthnActif, erreurCb } = props\n\n  // const { infoUsagerBackend, erreurCb, webauthnActif, setWebauthnActif } = props\n\n  const { t } = useTranslation()\n  const workers = useWorkers()\n  const usagerDb = useUsagerDb()[0]\n  const [usagerWebAuth, setUsagerWebAuth] = useUsagerWebAuth()\n\n  const confirmationEnregistrement = useCallback(message=>{\n      setWebauthnActif(true)  // Toggle alert\n  }, [setWebauthnActif])\n\n  // Load usagerWebAuth si non disponible\n  useEffect(()=>{\n    if(!usagerDb) return\n    console.debug(\"Applications usagerDb : \", usagerDb)\n    const nomUsager = usagerDb.nomUsager,\n          fingerprintPkCourant = usagerDb.fingerprintPk\n\n    if(!usagerWebAuth) {\n      // Charger usagerWebAuth, utiliser fingerprintPk courant pour verifier sont etat d'activation\n      axios({method: 'POST', url: '/auth/get_usager', data: {nomUsager, hostname: window.location.hostname, fingerprintPkCourant}})\n        .then(reponse=>{\n          const contenu = JSON.parse(reponse.data.contenu)\n          console.debug(\"Applications Chargement get_usager \", contenu)\n          setUsagerWebAuth(contenu)\n        })\n        .catch(err=>console.error(\"Erreur chargement usager \", err))\n    }\n  }, [workers, usagerDb, usagerWebAuth, setUsagerWebAuth, setWebauthnActif])\n\n  // Verifier si le certificat permet de s'authentifier sans webauthn (pour activation)\n  useEffect(()=>{\n    if(!usagerWebAuth) return\n    console.debug(\"Verifier si activation presente pour usager \", usagerWebAuth)\n    const infoUsager = usagerWebAuth.infoUsager || {}\n    const methodesDisponibles = infoUsager.methodesDisponibles || usagerWebAuth.methodesDisponibles || {}\n    if(methodesDisponibles.activation) {\n      console.info(\"Auth sans webauthn disponible pour le cert local - INSECURE\")\n      setWebauthnActif(false)  // Activation disponible pour ce cert, insecure\n    }\n  }, [workers, usagerWebAuth, setUsagerWebAuth, setWebauthnActif])\n\n  return (\n      <Alert show={!webauthnActif} variant=\"warning\">\n          <p>{t('Applications.compte-debloque-1')}</p>\n          <p>{t('Applications.compte-debloque-2')}</p>\n\n          <BoutonAjouterWebauthn \n              workers={workers}\n              confirmationCb={confirmationEnregistrement}\n              erreurCb={erreurCb}\n              variant=\"secondary\">\n                +<i className='fa fa-key'/>\n          </BoutonAjouterWebauthn>\n\n      </Alert>\n  )\n}\n\nfunction UpdateCertificat(props) {\n  const { confirmationCb, erreurCb, disabled } = props\n  console.debug(\"UpdateCertificat proppies %O\", props)\n\n  // const { infoUsagerBackend, setInfoUsagerBackend, confirmationCb, erreurCb, disabled } = props\n\n  const workers = useWorkers()\n  const [usagerDb, setUsagerDb] = useUsagerDb()\n  const [usagerWebAuth, setUsagerWebAuth] = useUsagerWebAuth()\n\n  // Verifier si usagerDb.delegations_version est plus vieux que webauth.infoUsager.delegations_versions\n  const versionObsolete = useMemo(()=>{\n    if(disabled || !usagerDb || !usagerWebAuth ) return false\n    console.debug(\"UpdateCertificat verifier version obsolete : usagerDb %O, usagerWebAuth %O, usagerSocketIo %O\", \n      usagerDb, usagerWebAuth)\n\n    const versionDb = usagerDb.delegations_version || 0\n    let obsolete = false\n\n    // Utiliser usagerWebAuth pour information a jour\n    if(usagerWebAuth && usagerWebAuth.infoUsager && usagerWebAuth.infoUsager.delegations_version !== undefined) {\n      const infoUsager = usagerWebAuth.infoUsager\n      const versionCompte = infoUsager.delegations_version || 0\n      console.debug(\"UpdateCertificat Version delegations compte : \", versionCompte)\n      obsolete = versionDb < versionCompte\n    } else if(usagerDb) {\n      // Faire un chargement en differe de l'information dans infoVersion.\n      const nomUsager = usagerDb.nomUsager\n      const requete = usagerDb.requete || {}\n      const fingerprintPkNouveau = requete.fingerprintPk\n      console.debug(\"UpdateCertificat getInfoUsager pour %s\", nomUsager)\n      workers.connexion.getInfoUsager(nomUsager, {hostname: window.location.hostname, fingerprintPkNouveau})\n        .then(async infoVersionReponse => {\n          console.debug(\"UpdateCertificat Reception infoVersion : \", infoVersionReponse)\n          if(infoVersionReponse.ok === true) {\n            const infoUsager = usagerWebAuth.infoUsager?{...usagerWebAuth.infoUsager}:{}\n            const compte = infoVersionReponse.compte\n\n            // Verifier reception de nouveau certificat en attachement\n            // Mettre a jour usagerDb directement si certificat match\n            if(infoVersionReponse['__original'].attachements && infoVersionReponse['__original'].attachements.certificat) {\n              const messageCertificat = infoVersionReponse['__original'].attachements.certificat\n              const contenuMessageCertificat = JSON.parse(messageCertificat.contenu)\n              if(contenuMessageCertificat.chaine_pem) {\n                console.info(\"Nouveau certificat recu en attachement\")\n                const {chaine_pem, fingerprint} = contenuMessageCertificat\n                // S'assurer que le fingerprint match celui de la requete\n                if(fingerprintPkNouveau === fingerprint) {\n                  console.debug(\"Certificat match requete, on conserve\")\n                  const { clePriveePem, fingerprintPk } = requete\n                  const dataAdditionnel = {\n                    clePriveePem, fingerprintPk, \n                    delegations_version: compte.delegations_version,\n                    delegations_date: compte.delegations_date,\n                  }\n                  await sauvegarderCertificatPem(nomUsager, chaine_pem, dataAdditionnel)\n\n                  // Mettre a jour l'information de l'usager DB\n                  const infoMaj = await workers.usagerDao.getUsager(nomUsager)\n                  setUsagerDb(infoMaj)\n                }\n              }\n            }\n\n\n            infoUsager.delegations_version = 0  // Evite une boucle infinie en cas de reponse sans delegations_version\n            Object.assign(infoUsager, infoVersionReponse.compte)\n            setUsagerWebAuth({...usagerWebAuth, infoUsager})\n          }\n        })\n        .catch(erreurCb)\n    }\n    console.debug(\"UpdateCertificat obsolete %s : db=%s\", obsolete, versionDb)\n\n    return obsolete\n  }, [workers, disabled, usagerDb, setUsagerDb, usagerWebAuth, setUsagerWebAuth, erreurCb])\n\n  const confirmationCertificatCb = useCallback( resultat => {\n      console.debug(\"UpdateCertificat Resultat update certificat : %O\", resultat)\n      const nomUsager = usagerDb.nomUsager\n      const requete = usagerDb.requete\n      const compte = usagerWebAuth.infoUsager\n      if(resultat.ok) {\n        const { clePriveePem, fingerprintPk } = requete\n        const dataAdditionnel = {\n          clePriveePem, fingerprintPk, \n          delegations_version: compte.delegations_version,\n          delegations_date: compte.delegations_date,\n        }\n        sauvegarderCertificatPem(nomUsager, resultat.certificat, dataAdditionnel)\n          .then( async ()=>{\n            if(confirmationCb) confirmationCb('Certificat mis a jour')\n\n            // Mettre a jour l'information de l'usager DB\n            const infoMaj = await workers.usagerDao.getUsager(nomUsager)\n            setUsagerDb(infoMaj)\n            \n            // Reconnecter avec le nouveau certificat\n            await workers.connexion.reconnecter()\n            await workers.connexion.onConnect()\n          })\n          .catch(erreurCb)\n      } else {\n        erreurCb('Erreur mise a jour certificat : ' + resultat.err)\n      }\n  }, [workers, usagerDb, setUsagerDb, usagerWebAuth, confirmationCb, erreurCb])\n\n  // Generer un nouveau CSR au besoin\n  useEffect(()=>{\n    if(versionObsolete) {\n        console.debug(\"UpdateCertificat (usager: %O)\", usagerDb)\n\n        const requete = usagerDb.requete || {}\n        if(!requete.fingerprintPk) {\n          console.debug(\"UpdateCertificat Generer nouveau certificat pour \", usagerDb)\n          const nomUsager = usagerDb.nomUsager\n          preparerNouveauCertificat(workers, nomUsager)\n            .then(async nouvellesCles => {\n                console.debug(\"UpdateCertificat Cle challenge/csr : %O\", nouvellesCles)\n                if(nouvellesCles) {\n                  const {csr, clePriveePem, fingerprint_pk} = nouvellesCles.cleCsr\n                  const requete = {csr, clePriveePem, fingerprintPk: fingerprint_pk}\n                  await workers.usagerDao.updateUsager(nomUsager, {nomUsager, requete})\n                  setUsagerDb({...usagerDb, requete})\n                }\n            })\n            .catch(erreurCb)\n        }\n    }\n  }, [workers, versionObsolete, usagerDb, setUsagerDb, erreurCb, disabled])\n\n  if(!usagerDb || !usagerDb.nomUsager) return ''\n\n  return (\n      <Alert variant='info' show={versionObsolete && !disabled}>\n          <Alert.Heading>Nouveau certificat disponible</Alert.Heading>\n          <p>\n              De nouvelles informations ou droits d'acces sont disponibles pour votre compte. \n              Cliquez sur le bouton <i>Mettre a jour</i> et suivez les instructions pour mettre a jour \n              le certificat de securite sur ce navigateur.\n          </p>\n\n          <BoutonMajCertificatWebauthn \n              usager={usagerDb}\n              onSuccess={confirmationCertificatCb}\n              onError={erreurCb}            \n              variant=\"secondary\">\n              Mettre a jour\n          </BoutonMajCertificatWebauthn>\n      </Alert>\n  )\n}\n\n","import Applications from './Applications'\n\nimport {useEtatPret} from './WorkerContext'\n\nfunction Accueil(props) {\n\n    const { setSectionAfficher, compteUsagerServeur, erreurCb } = props\n\n    const etatPret = useEtatPret()\n\n    if(!etatPret) return 'Accueil - Chargement en cours'\n\n    return (\n        <Applications \n            setSectionAfficher={setSectionAfficher} \n            compteUsagerServeur={compteUsagerServeur}\n            erreurCb={erreurCb} \n          />\n    )\n}\n\nexport default Accueil\n","import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _excluded = [\"format\"],\n    _excluded2 = [\"children\", \"count\", \"parent\", \"i18nKey\", \"context\", \"tOptions\", \"values\", \"defaults\", \"components\", \"ns\", \"i18n\", \"t\", \"shouldUnescape\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useContext, isValidElement, cloneElement, createElement } from 'react';\nimport HTML from 'html-parse-stringify';\nimport { getI18n, I18nContext, getDefaults } from './context';\nimport { warn, warnOnce } from './utils';\n\nfunction hasChildren(node, checkLength) {\n  if (!node) return false;\n  var base = node.props ? node.props.children : node.children;\n  if (checkLength) return base.length > 0;\n  return !!base;\n}\n\nfunction getChildren(node) {\n  if (!node) return [];\n  return node.props ? node.props.children : node.children;\n}\n\nfunction hasValidReactChildren(children) {\n  if (Object.prototype.toString.call(children) !== '[object Array]') return false;\n  return children.every(function (child) {\n    return isValidElement(child);\n  });\n}\n\nfunction getAsArray(data) {\n  return Array.isArray(data) ? data : [data];\n}\n\nfunction mergeProps(source, target) {\n  var newTarget = _objectSpread({}, target);\n\n  newTarget.props = Object.assign(source.props, target.props);\n  return newTarget;\n}\n\nexport function nodesToString(children, i18nOptions) {\n  if (!children) return '';\n  var stringNode = '';\n  var childrenArray = getAsArray(children);\n  var keepArray = i18nOptions.transSupportBasicHtmlNodes && i18nOptions.transKeepBasicHtmlNodesFor ? i18nOptions.transKeepBasicHtmlNodesFor : [];\n  childrenArray.forEach(function (child, childIndex) {\n    if (typeof child === 'string') {\n      stringNode += \"\".concat(child);\n    } else if (isValidElement(child)) {\n      var childPropsCount = Object.keys(child.props).length;\n      var shouldKeepChild = keepArray.indexOf(child.type) > -1;\n      var childChildren = child.props.children;\n\n      if (!childChildren && shouldKeepChild && childPropsCount === 0) {\n        stringNode += \"<\".concat(child.type, \"/>\");\n      } else if (!childChildren && (!shouldKeepChild || childPropsCount !== 0)) {\n        stringNode += \"<\".concat(childIndex, \"></\").concat(childIndex, \">\");\n      } else if (child.props.i18nIsDynamicList) {\n        stringNode += \"<\".concat(childIndex, \"></\").concat(childIndex, \">\");\n      } else if (shouldKeepChild && childPropsCount === 1 && typeof childChildren === 'string') {\n        stringNode += \"<\".concat(child.type, \">\").concat(childChildren, \"</\").concat(child.type, \">\");\n      } else {\n        var content = nodesToString(childChildren, i18nOptions);\n        stringNode += \"<\".concat(childIndex, \">\").concat(content, \"</\").concat(childIndex, \">\");\n      }\n    } else if (child === null) {\n      warn(\"Trans: the passed in value is invalid - seems you passed in a null child.\");\n    } else if (_typeof(child) === 'object') {\n      var format = child.format,\n          clone = _objectWithoutProperties(child, _excluded);\n\n      var keys = Object.keys(clone);\n\n      if (keys.length === 1) {\n        var value = format ? \"\".concat(keys[0], \", \").concat(format) : keys[0];\n        stringNode += \"{{\".concat(value, \"}}\");\n      } else {\n        warn(\"react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.\", child);\n      }\n    } else {\n      warn(\"Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.\", child);\n    }\n  });\n  return stringNode;\n}\n\nfunction renderNodes(children, targetString, i18n, i18nOptions, combinedTOpts, shouldUnescape) {\n  if (targetString === '') return [];\n  var keepArray = i18nOptions.transKeepBasicHtmlNodesFor || [];\n  var emptyChildrenButNeedsHandling = targetString && new RegExp(keepArray.join('|')).test(targetString);\n  if (!children && !emptyChildrenButNeedsHandling) return [targetString];\n  var data = {};\n\n  function getData(childs) {\n    var childrenArray = getAsArray(childs);\n    childrenArray.forEach(function (child) {\n      if (typeof child === 'string') return;\n      if (hasChildren(child)) getData(getChildren(child));else if (_typeof(child) === 'object' && !isValidElement(child)) Object.assign(data, child);\n    });\n  }\n\n  getData(children);\n  var ast = HTML.parse(\"<0>\".concat(targetString, \"</0>\"));\n\n  var opts = _objectSpread(_objectSpread({}, data), combinedTOpts);\n\n  function renderInner(child, node, rootReactNode) {\n    var childs = getChildren(child);\n    var mappedChildren = mapAST(childs, node.children, rootReactNode);\n    return hasValidReactChildren(childs) && mappedChildren.length === 0 ? childs : mappedChildren;\n  }\n\n  function pushTranslatedJSX(child, inner, mem, i, isVoid) {\n    if (child.dummy) child.children = inner;\n    mem.push(cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n      key: i\n    }), isVoid ? undefined : inner));\n  }\n\n  function mapAST(reactNode, astNode, rootReactNode) {\n    var reactNodes = getAsArray(reactNode);\n    var astNodes = getAsArray(astNode);\n    return astNodes.reduce(function (mem, node, i) {\n      var translationContent = node.children && node.children[0] && node.children[0].content && i18n.services.interpolator.interpolate(node.children[0].content, opts, i18n.language);\n\n      if (node.type === 'tag') {\n        var tmp = reactNodes[parseInt(node.name, 10)];\n        if (!tmp && rootReactNode.length === 1 && rootReactNode[0][node.name]) tmp = rootReactNode[0][node.name];\n        if (!tmp) tmp = {};\n        var child = Object.keys(node.attrs).length !== 0 ? mergeProps({\n          props: node.attrs\n        }, tmp) : tmp;\n        var isElement = isValidElement(child);\n        var isValidTranslationWithChildren = isElement && hasChildren(node, true) && !node.voidElement;\n        var isEmptyTransWithHTML = emptyChildrenButNeedsHandling && _typeof(child) === 'object' && child.dummy && !isElement;\n        var isKnownComponent = _typeof(children) === 'object' && children !== null && Object.hasOwnProperty.call(children, node.name);\n\n        if (typeof child === 'string') {\n          var value = i18n.services.interpolator.interpolate(child, opts, i18n.language);\n          mem.push(value);\n        } else if (hasChildren(child) || isValidTranslationWithChildren) {\n            var inner = renderInner(child, node, rootReactNode);\n            pushTranslatedJSX(child, inner, mem, i);\n          } else if (isEmptyTransWithHTML) {\n          var _inner = mapAST(reactNodes, node.children, rootReactNode);\n\n          mem.push(cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n            key: i\n          }), _inner));\n        } else if (Number.isNaN(parseFloat(node.name))) {\n          if (isKnownComponent) {\n            var _inner2 = renderInner(child, node, rootReactNode);\n\n            pushTranslatedJSX(child, _inner2, mem, i, node.voidElement);\n          } else if (i18nOptions.transSupportBasicHtmlNodes && keepArray.indexOf(node.name) > -1) {\n            if (node.voidElement) {\n              mem.push(createElement(node.name, {\n                key: \"\".concat(node.name, \"-\").concat(i)\n              }));\n            } else {\n              var _inner3 = mapAST(reactNodes, node.children, rootReactNode);\n\n              mem.push(createElement(node.name, {\n                key: \"\".concat(node.name, \"-\").concat(i)\n              }, _inner3));\n            }\n          } else if (node.voidElement) {\n            mem.push(\"<\".concat(node.name, \" />\"));\n          } else {\n            var _inner4 = mapAST(reactNodes, node.children, rootReactNode);\n\n            mem.push(\"<\".concat(node.name, \">\").concat(_inner4, \"</\").concat(node.name, \">\"));\n          }\n        } else if (_typeof(child) === 'object' && !isElement) {\n          var content = node.children[0] ? translationContent : null;\n          if (content) mem.push(content);\n        } else if (node.children.length === 1 && translationContent) {\n          mem.push(cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n            key: i\n          }), translationContent));\n        } else {\n          mem.push(cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n            key: i\n          })));\n        }\n      } else if (node.type === 'text') {\n        var wrapTextNodes = i18nOptions.transWrapTextNodes;\n\n        var _content = shouldUnescape ? i18nOptions.unescape(i18n.services.interpolator.interpolate(node.content, opts, i18n.language)) : i18n.services.interpolator.interpolate(node.content, opts, i18n.language);\n\n        if (wrapTextNodes) {\n          mem.push(createElement(wrapTextNodes, {\n            key: \"\".concat(node.name, \"-\").concat(i)\n          }, _content));\n        } else {\n          mem.push(_content);\n        }\n      }\n\n      return mem;\n    }, []);\n  }\n\n  var result = mapAST([{\n    dummy: true,\n    children: children || []\n  }], ast, getAsArray(children || []));\n  return getChildren(result[0]);\n}\n\nexport function Trans(_ref) {\n  var children = _ref.children,\n      count = _ref.count,\n      parent = _ref.parent,\n      i18nKey = _ref.i18nKey,\n      context = _ref.context,\n      _ref$tOptions = _ref.tOptions,\n      tOptions = _ref$tOptions === void 0 ? {} : _ref$tOptions,\n      values = _ref.values,\n      defaults = _ref.defaults,\n      components = _ref.components,\n      ns = _ref.ns,\n      i18nFromProps = _ref.i18n,\n      tFromProps = _ref.t,\n      shouldUnescape = _ref.shouldUnescape,\n      additionalProps = _objectWithoutProperties(_ref, _excluded2);\n\n  var _ref2 = useContext(I18nContext) || {},\n      i18nFromContext = _ref2.i18n,\n      defaultNSFromContext = _ref2.defaultNS;\n\n  var i18n = i18nFromProps || i18nFromContext || getI18n();\n\n  if (!i18n) {\n    warnOnce('You will need to pass in an i18next instance by using i18nextReactModule');\n    return children;\n  }\n\n  var t = tFromProps || i18n.t.bind(i18n) || function (k) {\n    return k;\n  };\n\n  if (context) tOptions.context = context;\n\n  var reactI18nextOptions = _objectSpread(_objectSpread({}, getDefaults()), i18n.options && i18n.options.react);\n\n  var namespaces = ns || t.ns || defaultNSFromContext || i18n.options && i18n.options.defaultNS;\n  namespaces = typeof namespaces === 'string' ? [namespaces] : namespaces || ['translation'];\n  var defaultValue = defaults || nodesToString(children, reactI18nextOptions) || reactI18nextOptions.transEmptyNodeValue || i18nKey;\n  var hashTransKey = reactI18nextOptions.hashTransKey;\n  var key = i18nKey || (hashTransKey ? hashTransKey(defaultValue) : defaultValue);\n  var interpolationOverride = values ? tOptions.interpolation : {\n    interpolation: _objectSpread(_objectSpread({}, tOptions.interpolation), {}, {\n      prefix: '#$?',\n      suffix: '?$#'\n    })\n  };\n\n  var combinedTOpts = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, tOptions), {}, {\n    count: count\n  }, values), interpolationOverride), {}, {\n    defaultValue: defaultValue,\n    ns: namespaces\n  });\n\n  var translation = key ? t(key, combinedTOpts) : defaultValue;\n  var content = renderNodes(components || children, translation, i18n, reactI18nextOptions, combinedTOpts, shouldUnescape);\n  var useAsParent = parent !== undefined ? parent : reactI18nextOptions.defaultTransParent;\n  return useAsParent ? createElement(useAsParent, additionalProps, content) : content;\n}"],"names":["Applications","props","erreurCb","workers","useWorkers","etatPret","useEtatPret","usagerDb","useUsagerDb","etatConnexion","useEtatConnexion","connexion","usagerProprietaire","useMemo","extensions","delegationGlobale","useState","applicationsExternes","setApplicationsExternes","webauthnActif","setWebauthnActif","useEffect","requeteListeApplications","then","reponse","applications","resultats","console","debug","catch","err","error","classNameUsager","Row","Col","xs","md","className","nomUsager","DemanderEnregistrement","UpdateCertificat","disabled","Trans","ListeApplications","typeAdresseProps","typeAdresse","apps","sort","a","b","nomA","application","nomB","localeCompare","urlLocal","URL","window","location","href","hostname","endsWith","adressesParHostname","app","adresses","url","push","onion","length","adresse","listeAppsParHostname","Nav","ListeApplicationsSite","urlSite","ListeSatellites","Alert","variant","Heading","t","useTranslation","filter","item","undefined","supporte_usagers","map","label","nameprop","name_property","replace","Link","rel","listeSatellitesTiers","Object","keys","titre","slice","useUsagerWebAuth","usagerWebAuth","setUsagerWebAuth","confirmationEnregistrement","useCallback","message","fingerprintPkCourant","fingerprintPk","axios","method","data","contenu","JSON","parse","infoUsager","methodesDisponibles","activation","info","show","confirmationCb","setUsagerDb","versionObsolete","versionDb","delegations_version","obsolete","versionCompte","requete","fingerprintPkNouveau","getInfoUsager","infoVersionReponse","ok","compte","attachements","certificat","messageCertificat","contenuMessageCertificat","chaine_pem","fingerprint","clePriveePem","dataAdditionnel","delegations_date","sauvegarderCertificatPem","usagerDao","getUsager","infoMaj","assign","confirmationCertificatCb","resultat","reconnecter","onConnect","preparerNouveauCertificat","nouvellesCles","cleCsr","csr","fingerprint_pk","updateUsager","usager","onSuccess","onError","setSectionAfficher","compteUsagerServeur","_excluded","_excluded2","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","i","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","hasChildren","node","checkLength","base","children","getChildren","getAsArray","Array","isArray","nodesToString","i18nOptions","stringNode","childrenArray","keepArray","transSupportBasicHtmlNodes","transKeepBasicHtmlNodesFor","child","childIndex","concat","isValidElement","childPropsCount","shouldKeepChild","indexOf","type","childChildren","i18nIsDynamicList","content","warn","_typeof","format","clone","_objectWithoutProperties","value","renderNodes","targetString","i18n","combinedTOpts","shouldUnescape","emptyChildrenButNeedsHandling","RegExp","join","test","getData","childs","ast","HTML","opts","renderInner","rootReactNode","mappedChildren","mapAST","prototype","toString","call","every","hasValidReactChildren","pushTranslatedJSX","inner","mem","isVoid","dummy","cloneElement","reactNode","astNode","reactNodes","reduce","translationContent","services","interpolator","interpolate","language","tmp","parseInt","name","attrs","newTarget","mergeProps","isElement","isValidTranslationWithChildren","voidElement","isEmptyTransWithHTML","isKnownComponent","hasOwnProperty","_inner","Number","isNaN","parseFloat","createElement","_inner3","_inner4","wrapTextNodes","transWrapTextNodes","_content","unescape","_ref","count","parent","i18nKey","context","_ref$tOptions","tOptions","values","defaults","components","ns","i18nFromProps","tFromProps","additionalProps","_ref2","useContext","I18nContext","i18nFromContext","defaultNSFromContext","defaultNS","getI18n","warnOnce","bind","k","reactI18nextOptions","getDefaults","options","react","namespaces","defaultValue","transEmptyNodeValue","hashTransKey","interpolationOverride","interpolation","prefix","suffix","useAsParent","defaultTransParent"],"sourceRoot":""}
<!DOCTYPE html>
<html lang="en">
  
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo128.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title id='titre'>MilleGrille</title>
    <link rel="stylesheet" type="text/css" href="%PUBLIC_URL%/index.css" media="screen" />
  </head>

  <body>

    <noscript>You need to enable JavaScript to run this app.</noscript>

    <div>
      <div id="splash" class="splash">
        <div class="navinit">
          <nav>
            <span>MilleGrilles</span>
          </nav>
        </div>
    
        <p class="titleinit">Preparation de la MilleGrille</p>
        
        <p>Veuillez patienter durant le chargement de la page.</p>
        
        <ol>
          <li id="splash_init1">Initialisation</li>
          <li id="splash_init2" class="hide">Chargement des composants dynamiques</li>
          <li id="splash_init3" class="hide">Connexion a la page</li>
          <li id="splash_init4" class="hide">Connecte TADA</li>
        </ol>
      </div>

      <div id="root" class="root hide">
      </div>

    </div>

  </body>

</html>

<script>
  if ('serviceWorker' in navigator) {
      if('%NODE_ENV%' === 'development') {
        navigator.serviceWorker.ready.then(function(registration) {
          console.debug("Environnement %NODE_ENV% - retrait service worker ", registration)
          registration.unregister()
        }).catch(err=>console.error("Erreur service worker ready ", err))
      } else {
        console.debug('Registering service worker %PUBLIC_URL%/sw.js')
        navigator.serviceWorker.register('%PUBLIC_URL%/sw.js', { scope: '%PUBLIC_URL%/' })
          .then(function (registration) {
            console.log('Service Worker Registered')
          })
          .catch(function (error) {
            console.error('Service Worker not registered due to error ', error)
          });
        navigator.serviceWorker.ready.then(function (registration) {
          console.log('Service Worker Ready')
        })
        .catch(function (error) {
          conso.error('Service Worker not ready due to error ', error)
        })

      }
  }
</script>
